{"version":1,"ops":[{"type":1,"author":{"id":"26b11f0ce6b39ac7615d3a24c6880ec977d1cf04"},"timestamp":1599685623,"metadata":{"github-id":"MDU6SXNzdWU2OTcxNTg3MzY=","github-url":"https://github.com/DFHack/dfhack/issues/1643","origin":"github"},"title":"quickfort: interpret modeless blueprints as #dig blueprints","message":"There is one particular feature that python quickfort had that I haven't implemented yet. The old quickfort would accept blueprints that had no modeline and interpret them as #dig blueprints. I didn't implement this for a few reasons:\n\n- I didn't want .xlsx sheets that didn't contain blueprints to throw errors (like sheets that just contain notes about the blueprints in the other sheets)\n- I was worried that \"modeless\" blueprints would make having multiple blueprints in the same sheet or .csv file confusing\n- The \"fix\" is easy: you just add a #dig line to the top\n- I had no data on whether anyone used this feature anyway\n\nBut looking through the blueprint library that Zalthor was so kind to upload, I see there are quite a few modeless blueprints in there. This, plus a comment lethosor made when I first implemented dig mode, made me rethink my position. Backwards compatibility is very important, and I don't want to break any blueprints that were working before.\n\nSo this is my new plan:\n\n- if the first line of a .csv file or spreadsheet sheet has no modeline, assume #dig. that blueprint will run until the next modeline in the file, just like a regularly-specified blueprint\n- introduce a new mode: #notes which can contain any text, will not show up in quickfort list, and will run until the next blueprint modeline is detected. we already have #comment syntax for inline comments. #notes mode will essentially act as a block comment.\n\nThen I'll just convert all the \"Notes\" sheets in the Dreamfort blueprint set to #notes \"blueprints\". This has the added benefit that I can stop filtering those sheets out when I convert the .xlsx data to .csv for the DFHack blueprint library dreamfort.csv file. The notes will now be available in the .csv file if anyone goes spelunking in there to look for them.","files":null}]}