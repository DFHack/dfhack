{"version":1,"ops":[{"type":1,"author":{"id":"34fcf18192ac8b8a77f4ce499e48b2944baa9cfd"},"timestamp":1514175055,"metadata":{"github-id":"MDU6SXNzdWUyODQ0MDE0MjA=","github-url":"https://github.com/DFHack/dfhack/issues/1206","origin":"github"},"title":"xml/StructFields.pm has too many errors","message":"While attempting to build dfhack (6175d7c151b1297298a566aad50d0bcb1460469b on develop branch), the process fails due to errors in a Perl module. Here is my perl version:\n\n```\n$ perl --version\n\nThis is perl 5, version 26, subversion 1 (v5.26.1) built for x86_64-linux\n(with 27 registered patches, see perl -V for more detail)\n```\n\n Here's a snippet from when it fails:\n\n```\n[ 27%] Generating ../../library/include/df/codegen.out.xml\nExperimental each on scalar is now forbidden at xml/StructFields.pm line 505.\nType of arg 1 to each must be hash or array (not private variable) at xml/StructFields.pm line 505, near \"$entry) \"\nType of arg 1 to Common::generate_field_table must be block or sub {} (not reference constructor) at xml/StructFields.pm line 513, near \"$full_name;\"\nType of arg 1 to Common::emit_block must be block or sub {} (not reference constructor) at xml/StructFields.pm line 536, near \"\";\";\"\nType of arg 1 to Common::with_emit_traits must be block or sub {} (not reference constructor) at xml/StructFields.pm line 537, near \"};\"\nType of arg 1 to Common::with_emit_static must be block or sub {} (not reference constructor) at xml/StructFields.pm line 545, near \"$fields_group;\"\nType of arg 1 to Common::with_emit must be block or sub {} (not reference constructor) at xml/StructFields.pm line 580, near \"};\"\nType of arg 1 to Common::emit_block must be block or sub {} (not reference constructor) at xml/StructFields.pm line 588, near \"};\"\nType of arg 1 to Common::with_emit_static must be block or sub {} (not reference constructor) at xml/StructFields.pm line 590, near \"'ctors';\"\nType of arg 1 to Common::outdent must be block or sub {} (not reference constructor) at xml/StructFields.pm line 597, near \"};\"\nxml/StructFields.pm has too many errors.\nCompilation failed in require at xml/codegen.pl line 21.\nBEGIN failed--compilation aborted at xml/codegen.pl line 21.\nmake[2]: *** [library/CMakeFiles/generate_headers.dir/build.make:121: ../library/include/df/codegen.out.xml] Error 255\nmake[1]: *** [CMakeFiles/Makefile2:639: library/CMakeFiles/generate_headers.dir/all] Error 2\nmake: *** [Makefile:152: all] Error 2\n```","files":null}]}