{"version":1,"ops":[{"type":1,"author":{"id":"4d3a2251fcfca71781345b9e86c3f2df02b7236c"},"timestamp":1383247122,"metadata":{"github-id":"MDU6SXNzdWUyMTkxOTQxNQ==","github-url":"https://github.com/DFHack/dfhack/issues/214","origin":"github"},"title":"Showstopper: 0.34.11-r3-bugfixes triggers dyld architecture error on OS X 10.9 Mavericks","message":"\u003e $ file hack/libdfhack.dylib\n\u003e hack/libdfhack.dylib: Mach-O dynamically linked shared library i386\n\u003e $ file dwarfort.exe\n\u003e dwarfort.exe: Mach-O executable i386\n\u003e $ ./dfhack\n\u003e dyld: could not load inserted library './hack/libdfhack.dylib' because no suitable image found.  Did find:\n\u003e         ./hack/libdfhack.dylib: mach-o, but wrong architecture\n\nIt looks like the problem is caused by this line in the `dfhack` script:\n\n\u003e export DYLD_INSERT_LIBRARIES=./hack/libdfhack.dylib\n\nSetting this causes the above dyld error to appear every time a command is passed to the shell.\n\nIt's _possible_ that this was caused by something else in my environment other than upgrading to 10.9 Mavericks, but I couldn't say what.\n\nIf I run the following:\n\n\u003e install_name_tool -add_rpath @executable_path/hack/libdfhack.dylib dwarfort.exe\n\nAnd then run the `df` script, it seems to work. So it looks like the problem results from a 32-bit library being added to DYLD_INSERT_LIBRARIES on a 64-bit system.","files":null}]}