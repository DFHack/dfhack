{"version":1,"ops":[{"type":1,"author":{"id":"ca75886d497ef73432f217c1a14fa6a27dbc7560"},"timestamp":1585420131,"metadata":{"github-id":"MDU6SXNzdWU1ODk2MzI0NjQ=","github-url":"https://github.com/DFHack/dfhack/issues/1525","origin":"github"},"title":"Cannot go back to previous screen after editing unit personality with gui/gm-unit","message":"DFHack build: 0.47.04-alpha0-85-g65a7db44\non Win7 64\n\nafter editing a unit personality, pressing \"Esc\" to go back doesn't do anything. The dfHack console prints the following error:\n\n`Invoking: gui/gm-unit\nUNKNOWN CLASS 'dfhack_lua_viewscreen@DFHack': vtable = 0x7fedb035e68\nC:\\DWARF FORTRESS\\DF4704/hack/scripts/modtools/set-need.lua:169: Cannot call field vector\u003cunit_personality.T_needs*\u003e.erase(): invalid index.\nstack traceback:\n\t[C]: in method 'erase'\n\tC:\\DWARF FORTRESS\\DF4704/hack/scripts/modtools/set-need.lua:169: in global 'removeNeed'\n\tC:\\DWARF FORTRESS\\DF4704/hack/scripts/modtools/set-need.lua:157: in global 'addNeed'\n\tC:\\DWARF FORTRESS\\DF4704/hack/scripts/modtools/set-need.lua:392: in field 'rebuildNeeds'\n\tC:\\DWARF FORTRESS\\DF4704/hack/scripts/gui/gm-unit.lua:1399: in function \u003cC:\\DWARF FORTRESS\\DF4704/hack/scripts/gui/gm-unit.lua:1398\u003e\n\t[C]: in field 'on_activate'\n\tC:\\DWARF FORTRESS\\DF4704\\hack\\lua\\gui\\widgets.lua:334: in function 'gui.widgets.check_text_keys'\n\t(...tail calls...)\n\tC:\\DWARF FORTRESS\\DF4704\\hack\\lua\\gui.lua:484: in function \u003cC:\\DWARF FORTRESS\\DF4704\\hack\\lua\\gui.lua:479\u003e\n\t(...tail calls...)\n\t[C]: in ?`","files":null}]}