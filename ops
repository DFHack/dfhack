{"version":1,"ops":[{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1477278169,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1NTYzODI4Mg==","github-url":"https://github.com/DFHack/dfhack/issues/1009#issuecomment-255638282"},"message":"``` cpp\nconst int TIXML_MAJOR_VERSION = 2;\nconst int TIXML_MINOR_VERSION = 5;\nconst int TIXML_PATCH_VERSION = 3;\n```\n\nThis appears to be https://sourceforge.net/projects/tinyxml/, which is the original TinyXML (I think), _not_ TinyXML2.\n\nI don't imagine we depend heavily on a specific version of TinyXML, so upgrading shouldn't be too bad if that would help.","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1477278178,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDgzMzI4ODMzNQ=="},"added":["crash/hang"],"removed":[]},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1477278262,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1NTYzODQzMw==","github-url":"https://github.com/DFHack/dfhack/issues/1009#issuecomment-255638433"},"message":"I wouldn't expect this to be the case, but is it possible that DFHack is still using its own TinyXML headers? I don't know why that wouldn't show up before 0.43.05, though, unless your system TinyXML isn't the same architecture as DFHack and CMake is switching things up on you.","files":null},{"type":3,"author":{"id":"3777bd9464a985e5d5f5348b51d9318b5e1c4118"},"timestamp":1477278983,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1NTYzOTU1MQ==","github-url":"https://github.com/DFHack/dfhack/issues/1009#issuecomment-255639551"},"message":"Hm, I suppose it's possible that the wrong headers are being picked up, but yeah, I'm not sure why that wouldn't have been an issue before this. I did double-check to make sure the 64-bit tinyxml is being detected properly by cmake: `TinyXML_LIBRARY:FILEPATH=/usr/lib64/libtinyxml.so` is definitely getting set.\n\n(I should probably have mentioned this was with 64-bit DF + DH in the initial report, my bad).\n\nThe last version of the original tinyxml looks to have been 2.6.2 back in 2011; that's what's packaged in Fedora. Given that tinyxml2 is now a thing I'd guess this is likely to be the last release for the foreseeable future. In which case it might make sense to upgrade in dfhack anyway?\n\nI can attempt building the dfhack tree with (bundled) tinyxml 2.6.2 sources and see if that changes anything.","files":null},{"type":3,"author":{"id":"3777bd9464a985e5d5f5348b51d9318b5e1c4118"},"timestamp":1477279864,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1NTY0MDkwNg==","github-url":"https://github.com/DFHack/dfhack/issues/1009#issuecomment-255640906"},"message":"Hm... building dfhack against a bundled copy of tinyxml 2.6.2 seems to work just fine, but building with -DEXTERNAL_TINYXML still causes a crash (on 64-bit) even when building by hand and not using RPM.\n\nI also tested running `rm depends/tinyxml/*.cpp depends/tinyxml/*.h` before the build to ensure I wasn't accidentally linking against the bundled tinyxml and it didn't fix the issue either.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1478047038,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1Nzc0MDYyNA==","github-url":"https://github.com/DFHack/dfhack/issues/1009#issuecomment-257740624"},"message":"Which compiler are you using?","files":null},{"type":3,"author":{"id":"3777bd9464a985e5d5f5348b51d9318b5e1c4118"},"timestamp":1478496102,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1ODc0OTY5MQ==","github-url":"https://github.com/DFHack/dfhack/issues/1009#issuecomment-258749691"},"message":"gcc 6.2.1, which I realize is much newer than the recommended compiler (but that's the current version of gcc on Fedora-- I'm also using it to build dwarffortress's libgraphics.so, and that appears to be working alright).\n\nI can test an older gcc and see if that works any better.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1478496629,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1ODc1MDU4Nw==","github-url":"https://github.com/DFHack/dfhack/issues/1009#issuecomment-258750587"},"message":"I mainly wanted to make sure it wasn't clang or something.\nOne possibility is the string ABI incompatibility. Maybe try compiling with `-D_GLIBCXX_USE_CXX11_ABI=0`? I would expect any issues related to that to result in linker errors, though.","files":null},{"type":3,"author":{"id":"57e3a4d5551fef965a0f00fa22aabe3f6dbade44"},"timestamp":1479946015,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI2MjY1OTg2Mw==","github-url":"https://github.com/DFHack/dfhack/issues/1009#issuecomment-262659863"},"message":"I can confirm that this this bug is fixed by using `-D_GLIBCXX_USE_CXX11_ABI=0`.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1479946541,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI2MjY2MDkwNw==","github-url":"https://github.com/DFHack/dfhack/issues/1009#issuecomment-262660907"},"message":"Thanks! That does appear to be in https://github.com/svenstaro/dwarf_fortress_unfuck/blob/d6a4ee67e7b41bec1caa87548640643db35a6080/CMakeLists.txt#L6, so that could explain why libgraphics was working.","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1481301408,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDg4ODU4NzI1OQ=="},"added":["idea"],"removed":[]},{"type":3,"author":{"id":"be523fe0f95fc478bda36c722e6f106f8f7a41b5"},"timestamp":1498598848,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxMTQ5MTA0MA==","github-url":"https://github.com/DFHack/dfhack/issues/1012#issuecomment-311491040"},"message":"To be honest I think nobody even used `reaction-trigger-transition` back when it was relevant. It's fine to remove it.\n\nThe (slight) benefit of removing `gui/hack-wish` would be to unclutter the output of `ls`. We could maintain backwards compatibility with #701 (alias command).\n\nI agree `modtools/create-item` should be able to make left and right gloves with one call and then `createitem` should be removed.\n\nTechnically I wrote `modtools/equip-item` not remembering that `equipitem` existed, but it does seem to do the same thing. I agree `equipitem` is deprecated.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1498601696,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxMTUwMTU2NA==","github-url":"https://github.com/DFHack/dfhack/issues/1012#issuecomment-311501564"},"message":"Changing hack-wish to an actual alias would be good.\n\nI have to disagree on `createitem`, though (see my last comment). It's simpler and more concise, supports creating items in containers and buildings, and has a lot of documentation already (including on the DF wiki). I'd be okay with replacing `createitem` with a wrapper script, as long as it keeps the same syntax and features, but \"modtools\" scripts are scripts that *only modders* should use (i.e. if a user has to type \"modtools/\" in the console to run a command, and they're not testing stuff for modding purposes, then that script is in the wrong place).","files":null}]}