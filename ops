{"version":1,"ops":[{"type":1,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1506516987,"metadata":{"github-id":"MDU6SXNzdWUyNjA5NjM1NzY=","github-url":"https://github.com/DFHack/dfhack/issues/1171","origin":"github"},"title":"The widgets.lua List:setChoices trashes the supplied list","message":"The operation takes the list of strings supplies and then rehacks it into a list of list that have a string element. That would be perfectly fine if it copied the list first, but it actually trashes the list given to it, which means you can't e.g. use the original list and add elements to it to pass in a new set.\nIt's reasonably easy to work around it by making sure you always pass a copy of your list to the operation for it to rip apart, but there's no warning label for the unwary, and the operation really ought to do the copying itself (and it isn't really a good idea to create external references to its internal data without a clear warning either).","files":null}]}