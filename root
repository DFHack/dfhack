{"version":1,"ops":[{"type":1,"author":{"id":"a9ce3d6c7d7eaa688380482bedfd5fd8e20086b4"},"timestamp":1358907669,"metadata":{"github-id":"MDU6SXNzdWUxMDIxODUzNA==","github-url":"https://github.com/DFHack/dfhack/issues/183","origin":"github"},"title":"workflow constraint disable / suspend when no input materials","message":"So, as I'm reasonably sure that nobody likes the constant complaints about unavailable input material when you have a protected job that has only periodically available input items, I'm looking for some sort of way to have those jobs to stay suspended.\n\nI've already looked into doing this from a script, but from reading the source, I don't see a way to disable a constraint temporarily.  It would continue to protect the job, but would never un-suspend the job while the 'disable' flag is set.  The only option I see is to have the workflow plugin completely remove the constraint until the inputs are satisfied, but that would leave the job unprotected.\n\nIt seems that adding a simple 'disabled' flag to a constraint would allow for this sort of flexibility via scripting.  My C++ is a bit rusty, but I could give it a try, unless anybody else has a better idea of how to tackle this.\n\nSo, I propose to change the following:\n- add a disabled flag to ItemConstraint\n- change the constraint processing to always suspend matching jobs when disabled\n- add a constraint-enable and constraint-disable sub-command\n- add 'enabled' or 'disabled' as a parameter at the end of a spec, after [cnt-gap] so that it could be disabled by default\n- change the 'list' sub-command to indicate enabled or disabled\n- expose this all via the Lua interface\n\nOnce that was done, I could work on using the scripting layer to add an input-material dependency management layer on top of workflow.\n\nThe other high-level approach I suppose I could consider is simply suppressing the warnings from the jobs with missing inputs.  I suppose that would also solve the annoying messages about missing seeds when there aren't enough to fill a whole large plot...\n\nThoughts?","files":null}]}