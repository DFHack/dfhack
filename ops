{"version":1,"ops":[{"type":1,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1495207645,"metadata":{"github-id":"MDU6SXNzdWUyMzAwMDk0NDg=","github-url":"https://github.com/DFHack/dfhack/issues/1093","origin":"github"},"title":"dfhack.init-example: repeat with warn-starving doesn't work","message":"As with dfhack.timeout(), `repeat` requires a world to be loaded to use any units other than `frames`. At the moment, any other timeouts are silently cancelled if a world is unloaded, so the example with `warn-starving` doesn't work at all. The docs aren't very helpful here, either - repeat.lua mentioned that it's useful in \"init files\", which led to confusion on IRC when putting a `repeat` call in dfhack.init didn't work.\n\nA couple possible solutions:\n* Add a new `onLoad.init-example` and expect people to rename it or copy over commands\n* Add an option to repeat.lua and/or repeatUtils.lua to automatically reschedule tasks that depend on a world being loaded whenever a world is loaded\n\nI'm leaning a bit towards the second one myself, since the first way would require people to work with an additional init file and would probably be slower to adopt. There isn't currently a warning if onLoad.init is missing, since we don't expect people to have it set up at all if they don't need it.\n\nEdit: turns out this is in *my* dfhack.init file, not the example one. May as well add it, though.","files":null}]}