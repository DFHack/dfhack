{"version":1,"ops":[{"type":2,"author":{"id":"d322d5b4fb091338d06d501b4bc9bf3ea0e802ba"},"timestamp":1463535752,"metadata":{"github-id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50NjYzODIyNTk4"},"title":"Crash to desktop on Search in the Unit view","was":"Crash to desktop on Search in the Unit view"},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1463536260,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDIxOTkwNDE0Mg==","github-url":"https://github.com/DFHack/dfhack/issues/928#issuecomment-219904142"},"message":"Which arrow keys? Left/right or up/down?","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1463536268,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDY2MzgyNzY4Mg=="},"added":["crash/hang"],"removed":[]},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1463536268,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDY2MzgyNzY4Mw=="},"added":["search"],"removed":[]},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1463536999,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDIxOTkwNTcyOQ==","github-url":"https://github.com/DFHack/dfhack/issues/928#issuecomment-219905729"},"message":"Okay, I got it to reproduce:\n- Select a tab with units\n- Enter a search query that doesn't match any units\n- Press `up`, then `left`\n\nThe traceback appears to be in DF.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1463537241,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDIxOTkwNjIzNg==","github-url":"https://github.com/DFHack/dfhack/issues/928#issuecomment-219906236"},"message":"`cursor_pos[n]` is getting set to -1 somehow (which is bad)","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1463537245,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDY2MzgzNjM0MQ=="},"added":["bug"],"removed":[]},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1463537909,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDIxOTkwNzY3MA==","github-url":"https://github.com/DFHack/dfhack/issues/928#issuecomment-219907670"},"message":"DF can handle a cursor_pos of -1, but only if the list is empty. I think we restore the list right before switching tabs, at which point DF panics because cursor_pos is still -1 but the list isn't empty anymore (or something like that). Anyway, saving and restoring the cursor position ought to work.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1463741097,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDIyMDU3NDY1Ng==","github-url":"https://github.com/DFHack/dfhack/issues/929#issuecomment-220574656"},"message":"Wait, just on the develop branch? What compiler are you using?","files":null},{"type":3,"author":{"id":"cf6dd353d390923130ceea0ecf9b708009360b7c"},"timestamp":1463741695,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDIyMDU3NjQ1OQ==","github-url":"https://github.com/DFHack/dfhack/issues/929#issuecomment-220576459"},"message":"I only tried the develop branch. Sorry I should have included my deets in the first post.\n\nArch Linux 64\n\n```\n~: uname -r\n4.5.1-1-ARCH\n~: pacman -Q gcc-multilib cmake perl-xml-libxml perl-xml-libxslt dwarffortress\ngcc-multilib 6.1.1-1\ncmake 3.5.2-2\nperl-xml-libxml 2.0124-2\nperl-xml-libxslt 1.94-2\ndwarffortress 0.43.02-1\n```\n\nTo be very clear, I cloned the repo then:\n\n```\ngit checkout develop\ngit submodule update\ncd dfhack\nrm -rf build/*\ncd build\ncmake .. -DCMAKE_BUILD_TYPE:string=Release-DCMAKE_INSTALL_PREFIX=$HOME/.dwarffortress\nmake install -j2\n```\n\nHad to delete everything in the build dir to get pass one compilation error related to pthreads, then ran into the compilation error relating to the `ceilf()` function. I added the `#include \u003cmath.h\u003e` to the file I mention, believing that the `ceilf()` comes from there, and the compilation ran smoothly all the way through.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1464213479,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDIyMTcyMDQ2Nw==","github-url":"https://github.com/DFHack/dfhack/issues/929#issuecomment-221720467"},"message":"Fixed in 9be9285","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1464213479,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50NjcyNDM1ODMw"},"status":2}]}