{"version":1,"ops":[{"type":1,"author":{"id":"0541b7dd92e4d9285c31215454cda686ef6b8a4e"},"timestamp":1534298354,"metadata":{"github-id":"MDU6SXNzdWUzNTA2NTk3NTc=","github-url":"https://github.com/DFHack/dfhack/issues/1392","origin":"github"},"title":"Proposal: Move biome type inference engine from embark-assistant to main library","message":"There is no straightforward way to determine the biome at a particular map tile square in fort mode, but it is possible. @ragundo worked out an inference algorithm for exportmaps in 2016: [see here](https://github.com/ragundo/exportmaps/blob/master/cpp/df_utils/biome_type.cpp). Ragundo's code was imported into dfhack as part of embark-assistant, at https://github.com/DFHack/dfhack/blob/master/plugins/embark-assistant/biome_type.cpp.\n\nI would like to move the (fairly complex) logic in embark-assistant into one of the general library modules, probably Maps. In addition to being used by embark-assistant, I need this logic to make autofarm work correctly (at present, it does a crappy job of assigning seeds to above-ground farms because it can't tell what plants can be planted where). It's also used by df-ai. Rather than replicate the same code across multiple plugins, it makes more sense to move this generic function to a library.\n\nComments?","files":null}]}