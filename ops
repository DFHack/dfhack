{"version":1,"ops":[{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1583807432,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDMxMTMwMjk1Mjc="},"added":["develop only"],"removed":[]},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1584829623,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDMxNTIxNTM0MzA="},"added":["structures"],"removed":[]},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1584829649,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwMjExMzUzOA==","github-url":"https://github.com/DFHack/dfhack/issues/1516#issuecomment-602113538"},"message":"@epsilon-phase is this on Windows? If so, it's likely the same cause as #1519","files":null},{"type":3,"author":{"id":"8bed1edfe3d0d0d87385e032bdcb9bba404c5c4e"},"timestamp":1585253072,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwNDY1NDgzOA==","github-url":"https://github.com/DFHack/dfhack/issues/1516#issuecomment-604654838"},"message":"@lethosor \nNo, it's on linux 64 bit(which I guess is the only flavor of linux these days)\n\nFeatures actually fails to produce anything and spits out this error.\n\n```\n...wnloads/df_47_04_linux/df_linux/hack/scripts/feature.lua:36: attempt to index a nil value (local 'feat')\nstack traceback:\n\t...wnloads/df_47_04_linux/df_linux/hack/scripts/feature.lua:36: in global 'list_features'\n\t...wnloads/df_47_04_linux/df_linux/hack/scripts/feature.lua:76: in local 'script_code'\n\t./hack/lua/dfhack.lua:680: in function 'dfhack.run_script_with_env'\n\t(...tail calls...)\n```\n\nSince I originally posted it I've been keeping the build up to date, and there's been no resolution thus far.","files":null},{"type":6,"author":{"id":"8bed1edfe3d0d0d87385e032bdcb9bba404c5c4e"},"timestamp":1585253072,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6MzYwODExNDY3"},"target":"9875cba0a10f4538ccbe259c00e68abaec69f857eadf939fe13ccccc2e334cc5","message":"@lethosor \nNo, it's on linux 64 bit(which I guess is the only flavor of linux these days). So whatever alignment issue there is must be cross-platform, unfortunately.\n\nFeatures actually fails to produce anything and spits out this error.\n\n```\n...wnloads/df_47_04_linux/df_linux/hack/scripts/feature.lua:36: attempt to index a nil value (local 'feat')\nstack traceback:\n\t...wnloads/df_47_04_linux/df_linux/hack/scripts/feature.lua:36: in global 'list_features'\n\t...wnloads/df_47_04_linux/df_linux/hack/scripts/feature.lua:76: in local 'script_code'\n\t./hack/lua/dfhack.lua:680: in function 'dfhack.run_script_with_env'\n\t(...tail calls...)\n```\n\nSince I originally posted it I've been keeping the build up to date, and there's been no resolution thus far.\n\nIs there anything I can contribute towards helping with this?","files":null},{"type":3,"author":{"id":"8bed1edfe3d0d0d87385e032bdcb9bba404c5c4e"},"timestamp":1585263975,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwNDczMTc5Mg==","github-url":"https://github.com/DFHack/dfhack/issues/1516#issuecomment-604731792"},"message":"This is currently working :) \n\n:3","files":null},{"type":4,"author":{"id":"8bed1edfe3d0d0d87385e032bdcb9bba404c5c4e"},"timestamp":1585263976,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzE3MDM5NDI1NQ=="},"status":2},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1585275488,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwNDc3OTQ1MA==","github-url":"https://github.com/DFHack/dfhack/issues/1516#issuecomment-604779450"},"message":"Wait, did you change something? `feature.lua` hasn't changed since 2018, so the only reason I can think of for the error you provided is that your save had a null feature somewhere. Did you move to a new save?\n\nAlso, we provide 32-bit Linux builds too (for 32-bit Linux DF, available [here](http://www.bay12games.com/dwarves/older_versions.html)), and alignment issues are frequently *not* cross-platform. Specifically, #1519 is only an issue on Windows - on Linux and macOS, world.arena_spawn is aligned properly.","files":null},{"type":6,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1585275488,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6MzYwODc4MDQy"},"target":"514603e2dc9a7b1e1d6f4fb9c7f2fe6bd35ddfea78933e3c010366e5880b1a31","message":"Wait, did you change something? `feature.lua` hasn't changed since 2018, so the only reason I can think of for the error you provided is that your save had a null feature somewhere. Did you move to a new save?\n\nAlso, we provide 32-bit Linux builds too (for 32-bit Linux DF, available [here](http://www.bay12games.com/dwarves/older_versions.html)), and alignment issues are frequently *not* cross-platform. Specifically, #1519 is only an issue on Windows - on Linux and macOS, world.arena_spawn is aligned properly. (Granted, 64-bit Windows and 64-bit non-Windows have more in common than any of those do with 32-bit builds of DF, but there are still some things that have different layouts/sizes on Windows.)","files":null},{"type":3,"author":{"id":"8bed1edfe3d0d0d87385e032bdcb9bba404c5c4e"},"timestamp":1585353450,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwNTM1ODYwNQ==","github-url":"https://github.com/DFHack/dfhack/issues/1516#issuecomment-605358605"},"message":"@lethosor No, that's a good question, but when I did update suddenly it showed up on the map that it hadn't previously(It didn't work on *any* map).\n\nLast commit I have pulled is 63f774dfef3001625b6f6b41f51a57cbc33f52ec\n\nNone of the things look promising as to *how* it got fixed. I'll look at my other saves  in the meantime and report back","files":null},{"type":6,"author":{"id":"8bed1edfe3d0d0d87385e032bdcb9bba404c5c4e"},"timestamp":1585353450,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6MzYxMTU5MzM3"},"target":"b2dc81a10aa9f6cb084ca32ff8c9a79e4f0cf692a71d63d693f8d1aa459bc385","message":"@lethosor No, that's a good question, but when I did update suddenly it showed up on the map that it hadn't previously(It didn't work on *any* map).\n\nLast commit I have pulled is 63f774dfef3001625b6f6b41f51a57cbc33f52ec\n\nNone of the things look promising as to *how* it got fixed. ~~I'll look at my other saves  in the meantime and report back~~\n\nAs of now, for some reason or another, it appears to work consistently across all the maps that I had issues with before. In either case, as soon as I saw that the other issue was fixed, I tried rebuilding it and it worked again.\n\nNo idea how, certainly can't find anything that touches the relevant files or structure definitions. :/","files":null}]}