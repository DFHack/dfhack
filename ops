{"version":1,"ops":[{"type":1,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1524564816,"metadata":{"github-id":"MDU6SXNzdWUzMTcxNTk4MDY=","github-url":"https://github.com/DFHack/dfhack/issues/1262","origin":"github"},"title":"The search enhancement of the stocks screen and the enhanced stock view fail on tool books and some \"books\"","message":"I've been trying to locate a particular codex/scroll/quire in my fortress, and found neither the search enhancement nor the enhanced stock view is able to find it. I think it's a scroll or quire, as searching seems to work fine with codices.\n\nTry a fortress with a lot of books. Go into the tools category and locate one of those. Try to get the 's'earch function to shrink the list ('the' *should* result in a number of books, but you'll typically only find feather wood things).\n\nI suspect it's caused by the wacky way quire and scrolls are \"named\", i.e. you have to follow the link to the contents to find the title, and I suspect neither of the enhancements do that, in which case they'd likely match on scroll and quire. Testing that shows that yes, \"scr\" provides a list of titles, presumably on scrolls, while \"quire\" does the same with quires (and a lot of blank ones). All of those are unsorted, of course.\n\nSearching for \"quire\" with the enhanced stocks view gave 72 quires in one collection marked with a '*', which probably are the quires written on.\n\nEdit: The work I was looking for turned out to be a codex, so those aren't found properly either. However, the enhanced view shows a number of titles (and searching on those narrows the enhanced view list down properly), so there seems to be some kind of category of written works that end up being handled properly. Yes. It's an item_bookst with a title, while most codices have a blank title.","files":null}]}