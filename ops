{"version":1,"ops":[{"type":5,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1594884568,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDM1NTE3NzQ4NjQ="},"added":["idea"],"removed":[]},{"type":3,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1594886750,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY1OTIzMzgwMQ==","github-url":"https://github.com/DFHack/dfhack/issues/1608#issuecomment-659233801"},"message":"Based on the article referenced, it looks like it would be a matter of weighing the amount of work it would require to get a new version to work vs the longer term benefit of better performance (where we have the option to go for a compiled plugin where it actually matters, and in those cases compiled is probably to be preferred to interpreted even if the interpreted version gets a bit faster than before).\nAs far as I can see, the DFHack usage of Lua is mainly small scale scripts so most of the changes aren't important. I don't see why a LuaJIT would be of interest, nor random numbers (I expect the ones available through DFHack would be used).\n\nMy conclusion is that there are no significant cons, and some minor pros, so it's up to whether someone is willing to do the work required for an update.","files":null},{"type":3,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1594887349,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY1OTIzODg4Mw==","github-url":"https://github.com/DFHack/dfhack/issues/1608#issuecomment-659238883"},"message":"@PatrikLundell luajit is another beast in itself. It has near native speed so about a third of plugins (the ones that are plugins due to perf) could become script. But in itself IMHO not worth it.\n\nAs for update - it should be drop in replacement. If i remember correctly the last update was no problems.\n\nAlso random number gen is um... Imho not great (pcg-random is better) but we already have a random module that does more anyway.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1594919898,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY1OTU1MzAzMg==","github-url":"https://github.com/DFHack/dfhack/issues/1608#issuecomment-659553032"},"message":"Lua 5.3 did introduce some incompatibilities, so we would need to be somewhat careful when upgrading to 5.4 (although a lot of these were due to the integer/float changes). Examples:\n* https://github.com/dfhack/scripts/commit/614b13820dd1f34b5d206c5c8dd6ac5775f7d3b2\n* https://github.com/dfhack/scripts/pull/13, #1044, https://github.com/DFHack/scripts/commit/0a022e862e009b37d06cd0f4e1d4097ae3395ecf (I think we might have ended up making these unnecessary in fa1adbbac4b3c1312587440684729652f89b3b73)\n* 38702febf7077842158c376a4b088288c616f3c4\n\nWe've also made changes to luaconf.h (and added dfhack_llimits.h) so those would need to be preserved/merged carefully.","files":null}]}