{"version":1,"ops":[{"type":3,"author":{"id":"d43bbc88f959d3b3a7dc2c667ab022148be6266a"},"timestamp":1473447772,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0NjAwODE2MA==","github-url":"https://github.com/DFHack/dfhack/issues/993#issuecomment-246008160"},"message":"I've written a C++ parser for all df structures and  codegen.out.xml with the purpose of showing them as a graphical viewer (like Unreal or Unity Blueprints). It generates also crossreferences between elements etc.\nThe parser is complete, I'm just beginning with the graphical viewer, but it would be interesting also to generate some html files with the data. Could you provide some examples of your tool output?","files":null},{"type":3,"author":{"id":"f7b5a7930d0e1264ae1e4a774b03a7e78c2b7858"},"timestamp":1473472075,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0NjA4MDY4MA==","github-url":"https://github.com/DFHack/dfhack/issues/993#issuecomment-246080680"},"message":"[This page](http://peridexiserrant.neocities.org/docs-structures-test/docs/Structures.html) has links to all the generated descriptions (`jobs` is a nice illustration I think).\n\nReally this is just pre-processing the xml a little, then pretty-printing it by sections.  The pre-processing is all about normalising text (always to single-line with no leading or trailing whitespace), and moving all node text / comments / node \"comment\" attributes to a `\u003ccomment\u003e` node (oh, and deleting `\u003ccode-helper\u003e` nodes).  This makes it easy to pretty-print simple by removing the `\u003ccomment\u003e` tags and wrapping all lines with appropriate indentation.\n\nI'd love to see a better parser though, because the structures are just crying out for hyperlinks!  I just stopped when I had a decent prototype, and it wasn't clear what would be most helpful.  (for example, I could also delete `\u003cpadding\u003e` nodes or anything where the name fits one of the (many) \"unknown\" patterns.  And finally - in the absence of a better parser which you may have ideas for - I think it's good enough that improving the human-readability of the xml files would give better results; more and longer comments, standardising names of unknown items, and so on.\n\nIf you're generating text output, the ideal would be to generate `.rst` instead of `.html`, so the rest of the docs can cross-reference any link targets :smile:","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1473526790,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0NjEyMjc4MQ==","github-url":"https://github.com/DFHack/dfhack/issues/993#issuecomment-246122781"},"message":"You probably shouldn't put the trimmed filename in front of every structure - e.g. on http://peridexiserrant.neocities.org/docs-structures-test/docs/_auto/structures/d_init.html, \"d_init.d_init\" doesn't make sense. Structure names can only be used once across files - the separate `df.*.xml` files are just for organizational purposes.","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1473526795,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDc4NDk1ODI3NA=="},"added":["documentation"],"removed":[]},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1473526799,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDc4NDk1ODMwMg=="},"added":["idea"],"removed":[]},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1473526955,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0NjEyMjkxOA==","github-url":"https://github.com/DFHack/dfhack/issues/993#issuecomment-246122918"},"message":"I'm also a bit concerned about the size of this. The xml files are already 2 MB, and I would expect the HTML documentation to be larger than that. It could be less significant when compressed, though.","files":null},{"type":3,"author":{"id":"f7b5a7930d0e1264ae1e4a774b03a7e78c2b7858"},"timestamp":1473582466,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0NjE2ODU4Mg==","github-url":"https://github.com/DFHack/dfhack/issues/993#issuecomment-246168582"},"message":"OK; unqualified names it is.  The section link targets still have to be qualified though, or there are a few dozen name conflicts...\n\nFor size:  6MB raw, 400KB compressed.  That's about one-eighth of the current docs - nothing to sneeze at, but I think worth it as there isn't a standard way to look up the structures at the moment (advice on how to do this would be a very valuable addition to the docs).","files":null},{"type":3,"author":{"id":"d43bbc88f959d3b3a7dc2c667ab022148be6266a"},"timestamp":1473587302,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0NjE3MTU5Mg==","github-url":"https://github.com/DFHack/dfhack/issues/993#issuecomment-246171592"},"message":"Could you link the jobs.rst file that generates the html file?. I would like to see the source file to see if it's easy to generate it programatically.\nThanks","files":null},{"type":3,"author":{"id":"f7b5a7930d0e1264ae1e4a774b03a7e78c2b7858"},"timestamp":1473591747,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0NjE3NDUwOQ==","github-url":"https://github.com/DFHack/dfhack/issues/993#issuecomment-246174509"},"message":"[Here it is](http://peridexiserrant.neocities.org/docs-structures-test/_sources/docs/_auto/structures/jobs.txt) - you can see this for anything in our docs via the \"page source\" link at the bottom of the HTML version.\n\nAlso worth comparing this to [the scripts pages](http://peridexiserrant.neocities.org/docs-structures-test/_sources/docs/_auto/base.txt), which use the `include` directive to reference text directly instead of pasting in the full content - but I'm transforming the XML so read-edit-write produces a different output.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1473604302,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0NjE4MzIwNg==","github-url":"https://github.com/DFHack/dfhack/issues/993#issuecomment-246183206"},"message":"Would it be possible to just use a single prefix for xml link targets (like \"xml.d_init\" instead of \"d_init.d_init\")?","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1483549162,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI3MDQyMzgzNA==","github-url":"https://github.com/DFHack/dfhack/issues/994#issuecomment-270423834"},"message":"Looks like the script should be modifying the viewscreen_layer_arena_creaturest fields (which aren't named yet) instead of world.arena_spawn.","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1483550871,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50OTExNTEyMzY4"},"status":2}]}