{"version":1,"ops":[{"type":1,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1578175355,"metadata":{"github-id":"MDU6SXNzdWU1NDUzMzc3OTQ=","github-url":"https://github.com/DFHack/dfhack/issues/1480","origin":"github"},"title":"Compile.rst: The Windows handling has changed...","message":"I read the document at the address \"https://dfhack.readthedocs.io/en/stable/docs/Compile.html\", which I hope contains the current version.\n\n- Chocolatey has changed its layout a little, so you'd get to the installation via an \"Install Now\" button at the top of the page. This is a minor change.\n- MSVC is a different issue, though. Things have changed since I installed it the last time, and apparently XP support has been removed since then. I first tried 2017, and it didn't work, then 2015, and it didn't work. Removed everything and installed 2015 (and SDK too, for good measure) since that's what works on the old computer. The first problem is with \u003cdfhack\u003e\\build\\win64\\generate-MSVC-gui.bat, which claims there is no C or CC compiler. Eventually I tried to see if MSVC could make sense of \u003cdfhack\u003e\\build\\win64\\VC2015\\CMakeFiles\\3.16.2\\VCTargetsPath.vcxproj (because the error messages seemed to be caused by two programs down here not compiling, among red herring messages of missing registry keys that don't exist on the old system either). MSVC then claimed XP support was needed, and offered to install it (which I accepted). I have no idea how you can get the original install to install that part. After that those programs compiled and the ...-gui bat file worked as expected.\nHowever, Microsoft must have made other changes as well, possibly with default switches, because trying to compile DFHack both through MSVC itself (using the generated .sln file), and through build-debug.bat results in a massive warning and error output. As far as I can see, there seems to be two different warnings (237 in total) of the type:\n\n C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include\\xlocale(341): warning C4530: C++ exception handler used, but unwind semantics are not enabled. Specify /EHsc (compiling source file C:\\dfhack\\depends\\protobuf\\google\\protobuf\\descriptor.pb.cc) [C:\\dfhack\\build\\win64\\VC2015\\depends\\protobuf\\protobuf.vcxproj]\n\nand\n\nC:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\include\\exception(359): warning C4577: 'noexcept' used with no exception handling mode specified; termination on exception is not guaranteed. Specify /EHsc (compiling source file C:\\dfhack\\depends\\protobuf\\google\\protobuf\\io\\gzip_stream.cc) [C:\\dfhack\\build\\win64\\VC2015\\depends\\protobuf\\protobuf.vcxproj]\n\nwith the error messages (7 of them) of the type:\n\nC:\\dfhack\\library\\modules\\Gui.cpp : fatal error C1128: number of sections exceeded object file format limit: compile with /bigobj [C:\\dfhack\\build\\win64\\VC2015\\library\\dfhack.vcxproj]","files":null}]}