{"version":1,"ops":[{"type":1,"author":{"id":"dfdbc537a4f78553f57a32cc99d65d2f0f024b58"},"timestamp":1340673459,"metadata":{"github-id":"MDU6SXNzdWU1MjYzMTMz","github-url":"https://github.com/DFHack/dfhack/issues/168","origin":"github"},"title":"stonesense fails with __pthread_mutex_lock (mutex=0xd2d2d2d2) at pthread_mutex_lock.c:50 50\tpthread_mutex_lock.c: No such file or directory.","message":"Using #! 10 64bit BPO (debian squeeze+backports) with some programs install from unstable\nstonesense crashes at startup showing only a completely black window.\nA backtrace for the crash is below.\n\n```\n./dfhack -g\nGNU gdb (GDB) 7.4.1-debian\nCopyright (C) 2012 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later \u003chttp://gnu.org/licenses/gpl.html\u003e\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nFor bug reporting instructions, please see:\n\u003chttp://www.gnu.org/software/gdb/bugs/\u003e...\nReading symbols from /media/Linux_Data/Dwarf_Fortress/Test_Fortress/0.34.X/df_34_11_linux/df_linux/libs/Dwarf_Fortress...(no debugging symbols found)...done.\n(gdb) run\nStarting program: /media/Linux_Data/Dwarf_Fortress/Test_Fortress/0.34.X/df_34_11_linux/df_linux/libs/Dwarf_Fortress \nERROR: ld.so: object './hack/libdfhack.so' from LD_PRELOAD cannot be preloaded: ignored.\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n\n(Dwarf_Fortress:4348): Gtk-WARNING **: /usr/lib/gtk-2.0/2.10.0/engines/libaurora.so: wrong ELF class: ELFCLASS64\n[New Thread 0xf45adb70 (LWP 4367)]\n[New Thread 0xf3dacb70 (LWP 4368)]\nLoading bindings from data/init/interface.txt\nNew window size: 640x300\nFont size: 8x12\nResizing grid to 80x25\nResizing font to 8x12\n\nResetting textures\n[New Thread 0xf3075b70 (LWP 4369)]\n[New Thread 0xf2874b70 (LWP 4370)]\nDFHack is ready. Have a nice day!\nType in '?' or 'help' for general help, 'ls' to see all commands.\n[DFHack]# [New Thread 0xf2073b70 (LWP 4371)]\n                                            stonesense\n[New Thread 0xf1872b70 (LWP 4613)]\n[New Thread 0xf1071b70 (LWP 4614)]\nStonesense launched\nUsing allegro version 5.0.5 r1\n[DFHack]# \nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 0xf1071b70 (LWP 4614)]\n__pthread_mutex_lock (mutex=0xd2d2d2d2) at pthread_mutex_lock.c:50\n50  pthread_mutex_lock.c: No such file or directory.\n(gdb) bt full\n#0  __pthread_mutex_lock (mutex=0xd2d2d2d2) at pthread_mutex_lock.c:50\n        __PRETTY_FUNCTION__ = \"__pthread_mutex_lock\"\n        type = \u003coptimized out\u003e\n#1  0xf74907d6 in pthread_mutex_lock () from /lib32/libc.so.6\nNo symbol table info available.\n#2  0xf6ac910f in ?? () from /usr/lib32/libX11.so.6\nNo symbol table info available.\n#3  0xf6adf9c4 in XrmQGetResource () from /usr/lib32/libX11.so.6\nNo symbol table info available.\n#4  0xf6ad6f7d in XStringToKeysym () from /usr/lib32/libX11.so.6\nNo symbol table info available.\n#5  0xf6b05c45 in _XimParseStringFile () from /usr/lib32/libX11.so.6\nNo symbol table info available.\n#6  0xf6b0ff39 in _XimLocalOpenIM () from /usr/lib32/libX11.so.6\nNo symbol table info available.\n#7  0xf6afcf3d in _XimOpenIM () from /usr/lib32/libX11.so.6\nNo symbol table info available.\n#8  0xf6ae8f0a in XOpenIM () from /usr/lib32/libX11.so.6\n---Type \u003creturn\u003e to continue, or q \u003creturn\u003e to quit---\nNo symbol table info available.\n#9  0xf324880e in xkeybd_init_keyboard ()\n   from ./stonesense/deplibs/liballegro.so.5.0\nNo symbol table info available.\n#10 0xf320e05b in al_install_keyboard ()\n   from ./stonesense/deplibs/liballegro.so.5.0\nNo symbol table info available.\n#11 0xf32e0875 in stonesense_thread(ALLEGRO_THREAD*, void*) ()\n   from /media/Linux_Data/Dwarf_Fortress/Test_Fortress/0.34.X/df_34_11_linux/df_linux/hack/plugins/stonesense.plug.so\nNo symbol table info available.\n#12 0xf321328f in thread_func_trampoline ()\n   from ./stonesense/deplibs/liballegro.so.5.0\nNo symbol table info available.\n#13 0xf32469b6 in thread_proc_trampoline ()\n   from ./stonesense/deplibs/liballegro.so.5.0\nNo symbol table info available.\n#14 0xf739dc39 in start_thread (arg=0xf1071b70) at pthread_create.c:304\n---Type \u003creturn\u003e to continue, or q \u003creturn\u003e to quit---\n        __res = \u003coptimized out\u003e\n        __ignore1 = \u003coptimized out\u003e\n        __ignore2 = \u003coptimized out\u003e\n        pd = 0xf1071b70\n        now = \u003coptimized out\u003e\n        unwind_buf = {cancel_jmp_buf = {{jmp_buf = {-147136524, 0, 4001536, \n                -251194344, 659618715, 1523485079}, mask_was_saved = 0}}, \n          priv = {pad = {0x0, 0x0, 0x0, 0x0}, data = {prev = 0x0, \n              cleanup = 0x0, canceltype = 0}}}\n        not_first_call = \u003coptimized out\u003e\n        freesize = \u003coptimized out\u003e\n        __PRETTY_FUNCTION__ = \"start_thread\"\n#15 0xf748351e in clone () from /lib32/libc.so.6\nNo symbol table info available.\n```","files":null}]}