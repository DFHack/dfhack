{"version":1,"ops":[{"type":1,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1464446562,"metadata":{"github-id":"MDU6SXNzdWUxNTczNDE3NzI=","github-url":"https://github.com/DFHack/dfhack/issues/935","origin":"github"},"title":"const method wrappers in lua","message":"It seems that wrapping const methods isn't currently possible (which I discovered when trying to wrap a custom method; I don't believe any vmethods can be defined as const in df-structures, so this hasn't come up before). It looks to me like making it possible would require adding 4 additional specializations of `function_wrapper` to `INSTANTIATE_WRAPPERS2`, and 2 specializations of `return_type` to `INSTANTIATE_RETURN_TYPE`, in DataFuncs.h. \n\nWhat I don't know is if the Lua API has some special way of dealing with read-only objects for const methods, so I'm holding off on this for now (_pings @angavrilov_)\n\nRelated to https://github.com/DFHack/df-structures/pull/133","files":null}]}