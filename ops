{"version":1,"ops":[{"type":2,"author":{"id":"c8bdff833a0d45e9a1c07751adfd0917db2f83d1"},"timestamp":1603043797,"metadata":{"github-id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50Mzg5MDQ4MzA5Mw=="},"title":"Easily reproducible crash, linux only","was":"Autogems UI save issue"},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1603044302,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcxMTM0MzMwNg==","github-url":"https://github.com/DFHack/dfhack/issues/1677#issuecomment-711343306"},"message":"The backtrace points to a DF (not DFHack) crash, although there's a chance that DFHack broke something before. I would try disabling all plugins and see if the crash still happens - `unload -all` is one way to forcibly do this. Also, are you using TWBT or any other third-party plugins?","files":null},{"type":6,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1603044302,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA3NDc5MTIw"},"target":"9f65b529efd65c38c01ede984c7c8d1ec8c1efe91a7757f4b1f25cb152517635","message":"The backtrace points to a DF (not DFHack) crash, although there's a chance that DFHack broke something beforehand. I would try disabling all plugins and see if the crash still happens - `unload -all` is one way to forcibly do this. Also, are you using TWBT or any other third-party plugins?","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1603047902,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDM4OTA1NDY0MjQ="},"added":["crash/hang"],"removed":[]},{"type":3,"author":{"id":"c8bdff833a0d45e9a1c07751adfd0917db2f83d1"},"timestamp":1603048144,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcxMTM4ODQ3Mg==","github-url":"https://github.com/DFHack/dfhack/issues/1677#issuecomment-711388472"},"message":"`unload -all` helped. I followed deeper by this path and found that it is something with `tweak` plugin.\ncommand `unload tweak` stops the crash. \nI followed even deeper and I found that this command is enough to prevent the crash:\n`tweak craft-age-wear disable`\nSo, it must be the guilty script.","files":null},{"type":3,"author":{"id":"c8bdff833a0d45e9a1c07751adfd0917db2f83d1"},"timestamp":1603048269,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcxMTM5MDQ5MQ==","github-url":"https://github.com/DFHack/dfhack/issues/1677#issuecomment-711390491"},"message":"But I have no idea why disbanding squads stop the crash.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1603048591,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcxMTM5NTYwOQ==","github-url":"https://github.com/DFHack/dfhack/issues/1677#issuecomment-711395609"},"message":"Can you upload the save? There is a DF military equipment corruption bug that could be related to this - my understanding is that items are being stored in containers of the wrong type, so craft-age-wear could be causing a crash to come up sooner than it would otherwise.\n\nDFFD is one place you could upload it (other sites would also work - GitHub has a relatively small file size limit, though): http://dffd.bay12games.com/","files":null},{"type":3,"author":{"id":"c8bdff833a0d45e9a1c07751adfd0917db2f83d1"},"timestamp":1603049558,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcxMTQwODcxOQ==","github-url":"https://github.com/DFHack/dfhack/issues/1677#issuecomment-711408719"},"message":"There is the save: https://dffd.bay12games.com/file.php?id=15257","files":null},{"type":3,"author":{"id":"c8bdff833a0d45e9a1c07751adfd0917db2f83d1"},"timestamp":1603052984,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcxMTQxNzc0OQ==","github-url":"https://github.com/DFHack/dfhack/issues/1677#issuecomment-711417749"},"message":"Ok, you must be right. On my list of squad equipment items I have `Wathafemali` - the first artefact `slab` from legends mode. Sorry for bothering you, it was quite confusing.","files":null},{"type":6,"author":{"id":"c8bdff833a0d45e9a1c07751adfd0917db2f83d1"},"timestamp":1603052984,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA3NDg5MTkx"},"target":"3e762764582db51c505ba3beed00b45516b9e239180b8d6fdc1ca5d01875fb95","message":"Ok, you must be right. On my list of squad equipment items I have `Wathafemali` (multiple times) - the first artefact `slab` from legends mode. Sorry for bothering you, it was quite confusing.","files":null},{"type":6,"author":{"id":"c8bdff833a0d45e9a1c07751adfd0917db2f83d1"},"timestamp":1603053032,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA3NDg5Mjc2"},"target":"3e762764582db51c505ba3beed00b45516b9e239180b8d6fdc1ca5d01875fb95","message":"Ok, you must be right. On my list of squad equipment armor items I have `Wathafemali` (multiple times) - the first artefact `slab` from legends mode. Sorry for bothering you, it was quite confusing.","files":null},{"type":6,"author":{"id":"c8bdff833a0d45e9a1c07751adfd0917db2f83d1"},"timestamp":1603053636,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA3NDkwMTAz"},"target":"3e762764582db51c505ba3beed00b45516b9e239180b8d6fdc1ca5d01875fb95","message":"Ok, you must be right. On my list of squad equipment armor items I have `Wathafemali` (multiple times) - the first artefact `slab` from legends mode. Sorry for bothering you, it was quite confusing.\nedited: I never made any raid, it must be item bring here by visitors or something","files":null},{"type":6,"author":{"id":"c8bdff833a0d45e9a1c07751adfd0917db2f83d1"},"timestamp":1603053652,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6NDA3NDkwMTIw"},"target":"3e762764582db51c505ba3beed00b45516b9e239180b8d6fdc1ca5d01875fb95","message":"Ok, you must be right. On my list of squad equipment armor items I have `Wathafemali` (multiple times) - the first artefact `slab` from legends mode. Sorry for bothering you, it was quite confusing.\nedited: I never made any raid, it must be an item bring here by a visitor or something","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1603061509,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcxMTQzNTg4MQ==","github-url":"https://github.com/DFHack/dfhack/issues/1677#issuecomment-711435881"},"message":"Out of curiosity, could you try PatrikLundell's script from here? http://www.bay12forums.com/smf/index.php?topic=164123.msg8195923#msg8195923\n(if you're unfamiliar: save this as a .lua file in hack/scripts - e.g. if you save it as hack/scripts/fix_equipment.lua, then you can run it with `fix_equipment` from the console)\nThis should give you some indication as to whether you do indeed have corrupted equipment, and may be able to fix some of it.","files":null},{"type":3,"author":{"id":"c8bdff833a0d45e9a1c07751adfd0917db2f83d1"},"timestamp":1603123546,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcxMjI2OTU5NA==","github-url":"https://github.com/DFHack/dfhack/issues/1677#issuecomment-712269594"},"message":"this worked! it's removed all strange armor entries, stopped the crash and give me following output:\n```\nCorrupted unassigned ARMOR, removing\t48\nCorrupted unassigned ARMOR, removing\t47\nCorrupted unassigned ARMOR, removing\t46\nCorrupted unassigned ARMOR, removing\t40\nCorrupted unassigned ARMOR, removing\t38\nCorrupted unassigned ARMOR, removing\t37\nCorrupted unassigned ARMOR, removing\t33\nCorrupted unassigned ARMOR, removing\t31\nCorrupted unassigned ARMOR, removing\t30\nCorrupted unassigned ARMOR, removing\t27\nCorrupted unassigned ARMOR, removing\t26\nCorrupted unassigned ARMOR, removing\t18\nCorrupted unassigned ARMOR, removing\t17\nCorrupted unassigned ARMOR, removing\t12\nCorrupted unassigned ARMOR, removing\t7\nCorrupted unassigned ARMOR, removing\t5\nCorrupted unassigned ARMOR, removing\t4\nCorrupted unassigned ARMOR, removing\t3\n```","files":null},{"type":3,"author":{"id":"c8bdff833a0d45e9a1c07751adfd0917db2f83d1"},"timestamp":1603123805,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcxMjI3MjE3NA==","github-url":"https://github.com/DFHack/dfhack/issues/1677#issuecomment-712272174"},"message":"When I find time to play on this save for a longer time, I will let you know if it will have any unintended consequences or whatever. For now, I believe the issue can be closed.","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1603131704,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDM4OTQ5MDIwMjE="},"added":["out of scope"],"removed":[]},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1603131708,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDcxMjM1ODE2OA==","github-url":"https://github.com/DFHack/dfhack/issues/1677#issuecomment-712358168"},"message":"Ok, thanks for the help troubleshooting this! I've opened a new thread (#1678) to track that script and hopefully get it into the next release.","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1603131708,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50Mzg5NDkwMjMwNg=="},"status":2}]}