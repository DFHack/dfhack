{"version":1,"ops":[{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1600128828,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5MjM4NDIyMw==","github-url":"https://github.com/DFHack/dfhack/issues/1647#issuecomment-692384223"},"message":"Squads appear to be stored in the world, not in individual forts. I suspect you'd be able to find the relevant squad in `world.squads.all`, e.g. with `df.squad.find(unit.squad_id)`.\nI'm not sure how to determine which fort a squad is part of, although squads do have an `entity_id` field that refers to a historical_entity. `Units::getSquadName()`, which manipulator uses, doesn't check it. I assume viewing these dwarves with the `v` menu doesn't show a squad name at all, right?","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1600128838,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDM3NjU4NDg2NTQ="},"added":["bug"],"removed":[]},{"type":3,"author":{"id":"d4c4d4fc9a0a7147745bf2f625a63816769928e6"},"timestamp":1600290243,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5MzY2NDM1OA==","github-url":"https://github.com/DFHack/dfhack/issues/1647#issuecomment-693664358"},"message":"Actually under view unit, it does indeed list the old squad from the previous fort. Curiouser and curiouser...","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1600311337,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5Mzc3NzU0MA==","github-url":"https://github.com/DFHack/dfhack/issues/1647#issuecomment-693777540"},"message":"Sounds similar to https://www.bay12games.com/dwarves/mantisbt/view.php?id=10718 (and https://www.bay12games.com/dwarves/mantisbt/view.php?id=5259, which is older).","files":null},{"type":3,"author":{"id":"d4c4d4fc9a0a7147745bf2f625a63816769928e6"},"timestamp":1600360279,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDM1MjA4Mg==","github-url":"https://github.com/DFHack/dfhack/issues/1647#issuecomment-694352082"},"message":"Yep, sounds like it's a general DF issue.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1600361170,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY5NDM1OTkyMA==","github-url":"https://github.com/DFHack/dfhack/issues/1647#issuecomment-694359920"},"message":"To clarify, I think it depends on whether squad IDs are intended to be cleared on migrants. If they're intentionally not cleared, then both this and the DF issue are related display issues (i.e. both places need to actually check the squad and see if it's relevant before displaying it). I don't actually know what the intended behavior is, though - there may be a reason on DF's end that squad IDs can't be automatically cleared that I'm unaware of.","files":null}]}