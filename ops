{"version":1,"ops":[{"type":1,"author":{"id":"d4ba99f16422e9377de56dab81d2b84415f00388"},"timestamp":1591728420,"metadata":{"github-id":"MDU6SXNzdWU2MzU2NzUzMzA=","github-url":"https://github.com/DFHack/dfhack/issues/1587","origin":"github"},"title":"Command line stdin dfhack","message":"DFHack does not like it currently when it does not get a stdin in the terminal.\n\nWhen running dfhack with:\n```bash\n./dfhack \u0026\n# Some other command I want to run.\n```\nThis will not fully start DFHack (Dwarf Fortress will open but window can not be interacted with and DFHack will not initialize over it)\nIf I then kill the `dfhack` process it does work for some reason (at least the `dwarffortress` process) but will print in stdout:\n```\n$ ./dfhack \u0026\n[1] 17477\n$ Loading bindings from data/init/interface.txt\nResetting textures\nDFHack is ready. Have a nice day!\nDFHack version 0.47.04-r1 (release) on x86_64\nType in '?' or 'help' for general help, 'ls' to see all commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\nRun 'help' or '?' for the list of available commands.\n...\u003ccontinues for pages and pages\u003e...\n```\n\nI think something like this might help: https://stackoverflow.com/a/1312957/2037998\nIt seems to work similarly as in Rust: https://crates.io/crates/atty (some good examples there)\n\nWhen running `echo \"test\" | ./dfhack` you get almost the same problem.\n```\n$ echo \"test\" | ./dfhack\nLoading bindings from data/init/interface.txt\nResetting textures\nDFHack is ready. Have a nice day!\nDFHack version 0.47.04-r1 (release) on x86_64\nType in '?' or 'help' for general help, 'ls' to see all commands.\n[DFHack]# test is not a recognized command.\n[DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n[DFHack]# [DFHack]# [DFHack]# Run 'help' or '?' for the list of available commands.\n```","files":null}]}