{"version":1,"ops":[{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493045134,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5NjY5MTM1OQ==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-296691359"},"message":"The issue is that the print mode is indistinguishable from STANDARD in-game, although I suppose reading init.txt would work. I'd rather check if the plugin is enabled, but I don't think that would work, since TwbT doesn't use the normal plugin enable/disable API.","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493045148,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDEwNTQ5MDg2NjE="},"added":["crash/hang"],"removed":[]},{"type":3,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1493051204,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5NjcyOTQxOQ==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-296729419"},"message":"There is a renderer header that has special value. We could check that. Though not sure if it would not be out-of-bounds if the renderer is not TWBT. See here https://github.com/mifki/df-twbt/blob/master/renderer_twbt.h#L65","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493052040,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5NjczNTY1NA==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-296735654"},"message":"Yeah, I'm concerned about that potentially breaking if TwbT isn't enabled. It might be possible to get the renderer's class name using DFHack - doReadClassName() tends to produce somewhat-mangled names for non-DF classes (e.g. `ack21dfhack_lua_viewscreenE`), but it should at least contain `renderer_cool` somewhere.","files":null},{"type":3,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1493052673,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5Njc0MDI3MA==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-296740270"},"message":"Could it be that https://github.com/DFHack/dfhack/blob/98893793bd19d359b75771279d694bff7dd34ede/library/Process-windows.cpp#L349 this skips the .dfh part instead in that case? Ofc. it depends on mangling but we could have some sort of read full classname thing.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493052890,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5Njc0MTg5NA==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-296741894"},"message":"No, on *nix it skips non-lowercase letters: https://github.com/DFHack/dfhack/blob/98893793bd19d359b75771279d694bff7dd34ede/library/Process-darwin.cpp#L124\nI think doReadClassName's result should *contain* `renderer_cool`, at least, so that could be enough.","files":null},{"type":3,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1493055304,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5Njc2MTkwNw==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-296761907"},"message":"Heh, that \"FIXME BAD\" above though :D","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493750044,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5ODcyMjEyMg==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-298722122"},"message":"@PeridexisErrant does it work with PRINT_MODE:STANDARD?","files":null},{"type":3,"author":{"id":"f7b5a7930d0e1264ae1e4a774b03a7e78c2b7858"},"timestamp":1494230473,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5OTc5OTUxNw==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-299799517"},"message":"Hmm, looks like we have a variety of interactions depending on the print mode.  I also seem to have had something depend on whether `ssense overlay` is invoked before or after loading a fort, but have not been able to replicate that.\n\n- `PRINT_MODE:2D` - works as expected.\n\n- `PRINT_MODE:STANDARD` and `PRINT_MODE:TWBT_LEGACY` seem to be equivalent.  DF does not crash, but no location changes are displayed in the viewport - the view is stuck wherever ssense was invoked, and only the hover from mousequery and z-level indicators indicate that the viewport is moving.\n\n- In `PRINT_MODE:TWBT`, `ssense overlay` makes DF crash when a fort is loaded (if invoked from the starting menu), or immediately if invoked with a fort loaded.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1494350995,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMwMDI0MTU1Ng==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-300241556"},"message":"Well, since STANDARD and TWBT/TWBT_LEGACY are all broken, the easiest option is to disable STANDARD, which has the effect of disabling all three of those.","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1494352053,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTA3NTA1NTY2Nw=="},"status":2}]}