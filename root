{"version":1,"ops":[{"type":1,"author":{"id":"d4ba99f16422e9377de56dab81d2b84415f00388"},"timestamp":1587854958,"metadata":{"github-id":"MDU6SXNzdWU2MDY4NzE0NTY=","github-url":"https://github.com/DFHack/dfhack/issues/1554","origin":"github"},"title":"Exportlegends \"-1\" values as default","message":"This talks about the [exportlegends.lua](https://github.com/DFHack/scripts/blob/master/exportlegends.lua) script.\nI have noticed that everywhere in `\u003chistorical_event\u003e` where there is a value that is:\n- unknown\n- does not exist\n- does not apply\n- ...\n\nIt will default to giving it a value of \"-1\". In some cases this gives some weird results.\nHere some examples:\n```\n\u003chistorical_event\u003e\n        \u003cid\u003e430\u003c/id\u003e\n        \u003ctype\u003eartifact_created\u003c/type\u003e\n        \u003cartifact_id\u003e4\u003c/artifact_id\u003e\n        \u003ccreator_unit_id\u003e-1\u003c/creator_unit_id\u003e\n        \u003ccreator_hfid\u003e730\u003c/creator_hfid\u003e\n        \u003csite\u003e-1\u003c/site\u003e\n        \u003ccircumstance\u003e\n                \u003ctype\u003e-1\u003c/type\u003e\n        \u003c/circumstance\u003e\n        \u003creason\u003e\n                \u003ctype\u003enone\u003c/type\u003e\n        \u003c/reason\u003e\n\u003c/historical_event\u003e\n```\nor\n```\n\u003chistorical_event\u003e\n        \u003cid\u003e2870\u003c/id\u003e\n        \u003ctype\u003echange_hf_state\u003c/type\u003e\n        \u003chfid\u003e1437\u003c/hfid\u003e\n        \u003cstate\u003e1\u003c/state\u003e\n        \u003creason\u003e-1\u003c/reason\u003e\n        \u003csite\u003e-1\u003c/site\u003e\n\u003c/historical_event\u003e\n```\n\nAs you can see this adds a lot of \"Redundant\" tags for things that should be the default value.\nIn the case of `reason.type` the default value is `none` instead of `-1`.\n\nThese events could be shorter:\n```\n\u003chistorical_event\u003e\n        \u003cid\u003e430\u003c/id\u003e\n        \u003ctype\u003eartifact_created\u003c/type\u003e\n        \u003cartifact_id\u003e4\u003c/artifact_id\u003e\n        \u003ccreator_hfid\u003e730\u003c/creator_hfid\u003e\n\u003c/historical_event\u003e\n```\nor\n```\n\u003chistorical_event\u003e\n        \u003cid\u003e2870\u003c/id\u003e\n        \u003ctype\u003echange_hf_state\u003c/type\u003e\n        \u003chfid\u003e1437\u003c/hfid\u003e\n        \u003cstate\u003e1\u003c/state\u003e\n\u003c/historical_event\u003e\n```\nBut this of course might break old implementations.\n\nWhat should/should not happen with these tags? Are there some guild-lines that we should look to when making these decisions?","files":null}]}