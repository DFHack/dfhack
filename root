{"version":1,"ops":[{"type":1,"author":{"id":"3b082f3e4be2914cb951ffc9d44bc2b42eff8982"},"timestamp":1303526003,"metadata":{"github-id":"MDU6SXNzdWU4MDQ0OTE=","github-url":"https://github.com/DFHack/dfhack/issues/72","origin":"github"},"title":"Creatures::Start retrieves 0 or only a few creatures","message":"On a new embark, numcreatures in Creatures::Start() is set to 0 instead of maybe 20 what it should be.\n\nIn an old game with approx. 600 creatures, numcreatures is set to 42 (IIRC), and those 42 creatures are a number of gnomes and four babies, meaning that nearly all creatures are omitted. Possible, that the successfully retrieved creatures are on the bottom of the list (there was a gnome siege recently, so both gnomes and babies probably are the highest ids).\n\nManually retriefing creatures with a higher ID results in an error, so I guess simply not all creatures are retrieved from memory.\n\nHere is how I reproduced this with a new embark and a fresh checkout from github:\n\n$ git clone https://github.com/peterix/dfhack.git\n$ cd dfhack/\n$ mkdir build-raoulxq\n$ cd build-raoulxq/\n$ cmake .. -DCMAKE_BUILD_TYPE:string=Release -DBUILD_DFHACK_EXAMPLES=YES -DBUILD_DFHACK_PLAYGROUND=YES\n$ make\n$ cd ..\n$ sudo build-raoulxq/bin/dfcreaturedump \n\nOutput:\n\nNo creatures to print","files":null}]}