{"version":1,"ops":[{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1471919602,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0MTYxMDAzMg==","github-url":"https://github.com/DFHack/dfhack/issues/984#issuecomment-241610032"},"message":"Is there a reason for moving the \"return -1\" out of the switch block that I'm missing? Also, is it actually possible for rebase_delta to be negative?\n\nOther than that, this should be fine - even if this doesn't cover all of the broken cases, fixing this one will have to be done eventually. Do you happen to know if this is MSVC-specific, or can this show up with GCC too?","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1471919611,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDc2Mzg5MzIwMw=="},"added":["bug"],"removed":[]},{"type":3,"author":{"id":"21111596d814722152a65a59652f76459a4dee15"},"timestamp":1471924399,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0MTYxOTc0NQ==","github-url":"https://github.com/DFHack/dfhack/issues/984#issuecomment-241619745"},"message":"Didn't want to create 2 default case statements for each fall-through.  Technically both should return -1.  There is no difference in the generated code and there is probably a couple of ways to write this but I find this the clearest.  Also pretty sure this is MSVC specific as its in a bigger MSVC block. GCC probably handles jumps like this differently but I'm not familiar with it.\n\nI picked intptr_t over uintptr_t as deltas generally aren't unsigned and there was quite a bit of inconsistency already there (uintptr_t vs int).  I suppose it could be negative but in practice its going to be positive in nearly all cases.  It does have to be 64-bit though for Win64.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1474861184,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0OTQ3MzA4NA==","github-url":"https://github.com/DFHack/dfhack/issues/984#issuecomment-249473084"},"message":"@quietust Does this look good to you?","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1474861275,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDgwMTczNDcwMQ=="},"added":["64-bit"],"removed":[]},{"type":3,"author":{"id":"5221f59e75ea9db114593bbdfb180b7354aef9ed"},"timestamp":1475109312,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1MDM0MDQ3Mw==","github-url":"https://github.com/DFHack/dfhack/issues/984#issuecomment-250340473"},"message":"The above listed patch for VTableInterpose is no longer necessary - the fix I added in 27d222966504223578684db02eb466abddc85679 accounts for it in a slightly cleaner way (by skipping the 0x48 byte, everything else just lines up).","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1475109671,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1MDM0MTI2NQ==","github-url":"https://github.com/DFHack/dfhack/issues/984#issuecomment-250341265"},"message":"Ah, right. I'll just add the rebase_delta change, then.","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1475109841,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50ODA2MzA5NjA4"},"status":2}]}