{"version":1,"ops":[{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1546555445,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ1MTMwMTUzOQ==","github-url":"https://github.com/DFHack/dfhack/issues/1420#issuecomment-451301539"},"message":"I believe @BenLubar ran into something similar with df-ai, and there are now functions in Core to replace what CoreSuspendClaimer did, but I don't remember the exact details at the moment.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1546555535,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ1MTMwMTg5Mw==","github-url":"https://github.com/DFHack/dfhack/issues/1420#issuecomment-451301893"},"message":"Appears to be a550e112c3307e568309b2bc0c6e026494543e9b - not sure how useful this is for remote.","files":null},{"type":3,"author":{"id":"54edb2db9eb9b7cc6fbbb0681df88d5b1d14abe6"},"timestamp":1546558964,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ1MTMxMzc0OQ==","github-url":"https://github.com/DFHack/dfhack/issues/1420#issuecomment-451313749"},"message":"This seems to be something else.","files":null},{"type":6,"author":{"id":"54edb2db9eb9b7cc6fbbb0681df88d5b1d14abe6"},"timestamp":1546558964,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDE2NzkzODkyNw=="},"target":"608a0f74baee412181c9bf586567c91c5408ad281bcb6b0ffc8e588818313333","message":"That seems to be something else.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1546569982,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ1MTM0MDU4NA==","github-url":"https://github.com/DFHack/dfhack/issues/1420#issuecomment-451340584"},"message":"What does df-remote do to suspend the core \"differently\"?\n\nI'm totally fine with introducing a workaround for df-remote, by the way, but I'm not sure what it requires.","files":null},{"type":3,"author":{"id":"54edb2db9eb9b7cc6fbbb0681df88d5b1d14abe6"},"timestamp":1546816258,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ1MTc4NDI0MA==","github-url":"https://github.com/DFHack/dfhack/issues/1420#issuecomment-451784240"},"message":"It directly sends commands to the game loop https://github.com/BenLubar/libgraphics/blob/master/enabler.cpp#L296\n\nI can't use CoreSuspender in Remote because it's too slow in some cases. To maintain simulation FPS, the game processes simulation frames in batches, i.e. processes the required number of frames then waits. DFHack code won't be called until it's time to process the next batch. Instead, I send a command to the game loop and once I get a response, that means it's not inside the simulation code, but most important, the command will wake it up if it's waiting.\n\nI'm not completely sure how the new CoreSuspender works and why the rewrite was required, so maybe @suokko can suggest something. Basically as I said, before CoreSuspendClaimer wasn't actually suspending/waiting (and that was the difference between it and CoreSuspender) and now it is. Another option is to check whether CoreSuspendClaimer is actually required after all the changes.","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1562020091,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDI0NTI2MTU3NTE="},"added":["internal"],"removed":[]}]}