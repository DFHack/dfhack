{"version":1,"ops":[{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493045134,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5NjY5MTM1OQ==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-296691359"},"message":"The issue is that the print mode is indistinguishable from STANDARD in-game, although I suppose reading init.txt would work. I'd rather check if the plugin is enabled, but I don't think that would work, since TwbT doesn't use the normal plugin enable/disable API.","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493045148,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDEwNTQ5MDg2NjE="},"added":["crash/hang"],"removed":[]},{"type":3,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1493051204,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5NjcyOTQxOQ==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-296729419"},"message":"There is a renderer header that has special value. We could check that. Though not sure if it would not be out-of-bounds if the renderer is not TWBT. See here https://github.com/mifki/df-twbt/blob/master/renderer_twbt.h#L65","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493052040,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5NjczNTY1NA==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-296735654"},"message":"Yeah, I'm concerned about that potentially breaking if TwbT isn't enabled. It might be possible to get the renderer's class name using DFHack - doReadClassName() tends to produce somewhat-mangled names for non-DF classes (e.g. `ack21dfhack_lua_viewscreenE`), but it should at least contain `renderer_cool` somewhere.","files":null},{"type":3,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1493052673,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5Njc0MDI3MA==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-296740270"},"message":"Could it be that https://github.com/DFHack/dfhack/blob/98893793bd19d359b75771279d694bff7dd34ede/library/Process-windows.cpp#L349 this skips the .dfh part instead in that case? Ofc. it depends on mangling but we could have some sort of read full classname thing.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493052890,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5Njc0MTg5NA==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-296741894"},"message":"No, on *nix it skips non-lowercase letters: https://github.com/DFHack/dfhack/blob/98893793bd19d359b75771279d694bff7dd34ede/library/Process-darwin.cpp#L124\nI think doReadClassName's result should *contain* `renderer_cool`, at least, so that could be enough.","files":null},{"type":3,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1493055304,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5Njc2MTkwNw==","github-url":"https://github.com/DFHack/dfhack/issues/1078#issuecomment-296761907"},"message":"Heh, that \"FIXME BAD\" above though :D","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493411121,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDEwNjI3NjA5ODQ="},"added":["bug"],"removed":[]},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493412345,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5ODEwMjQxNA==","github-url":"https://github.com/DFHack/dfhack/issues/1080#issuecomment-298102414"},"message":"It looks like that should do nothing at all, actually: https://github.com/DFHack/scripts/blob/95dbacdab21ce24dbc25aacc8173d370b099bce9/prefchange.lua#L351\nOnly recognized options should do anything. Did you notice any changes to your dwarves' preferences? I'll add support for `help`, anyway.","files":null},{"type":3,"author":{"id":"537e51e6a7ef5475100b921bf361d99c28783de5"},"timestamp":1493417024,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5ODExNzEyNg==","github-url":"https://github.com/DFHack/dfhack/issues/1080#issuecomment-298117126"},"message":"Yeah, every dwarf liked weapons, armor, steel, iron, and plump helmets after that; it explicitly went through every dwarf, announcing that their preferences were changed.\n\nThanks (-:","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493418727,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5ODEyMTUxMA==","github-url":"https://github.com/DFHack/dfhack/issues/1080#issuecomment-298121510"},"message":"Huh, it doesn't do that for me (and gives no output). What DFHack version are you using? Can you run `type prefchange` and tell me what it says?","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1494044564,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI5OTYxNDY3Ng==","github-url":"https://github.com/DFHack/dfhack/issues/1080#issuecomment-299614676"},"message":"@escondida are you using any mods?","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1494362214,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTA3NTMyNDYxMw=="},"status":2},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1494362257,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMwMDI5Mzg3Mw==","github-url":"https://github.com/DFHack/dfhack/issues/1080#issuecomment-300293873"},"message":"I added a \"help\" option, but I strongly suspect you're using a third-party version of this script, so my change won't help unless you can track down whoever's distributing that version of prefchange.lua and get them to fix it too.","files":null},{"type":3,"author":{"id":"537e51e6a7ef5475100b921bf361d99c28783de5"},"timestamp":1494369039,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMwMDMyMDUwNA==","github-url":"https://github.com/DFHack/dfhack/issues/1080#issuecomment-300320504"},"message":"Hey, lethosor. I missed your earlier question, sorry. Thanks for implementing help anyway, but here are the belated answers:\n\nIt's the one shipped with dfhack as of 0.34.11-r5-2813-g098481c6 (19th April '17, branch \"develop\", full commit hash 098481c60d2cd55c26b85dff8380aa55a381e52e)\n\n\"type prefchange\" â‡’ prefchange is a Lua script: /home/ivy/local/games/data/native/dwarffortress/hack/scripts/prefchange.lua\n\n(~/.../dwarffortress is where df is, naturally).","files":null},{"type":3,"author":{"id":"537e51e6a7ef5475100b921bf361d99c28783de5"},"timestamp":1494369141,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMwMDMyMDgxMw==","github-url":"https://github.com/DFHack/dfhack/issues/1080#issuecomment-300320813"},"message":"And I didn't specify it above, but it's definitely the official dfhack repository (https://github.com/DFHack/dfhack.git); I've never even added another remote.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1494369209,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMwMDMyMTAzMw==","github-url":"https://github.com/DFHack/dfhack/issues/1080#issuecomment-300321033"},"message":"What's the md5 of prefchange.lua?","files":null},{"type":3,"author":{"id":"537e51e6a7ef5475100b921bf361d99c28783de5"},"timestamp":1494371802,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMwMDMyODM5Mw==","github-url":"https://github.com/DFHack/dfhack/issues/1080#issuecomment-300328393"},"message":"md5:\n9b382259750583a7241a33b13bbdf228\tprefchange.lua\n\nsha256:\ndd472c98e53986457820111aa7673cd390b94d29d72518595aa60fb49a0756ff  prefchange.lua","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1494371964,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMwMDMyODgyMw==","github-url":"https://github.com/DFHack/dfhack/issues/1080#issuecomment-300328823"},"message":"That looks right. I have no clue what the issue could be, because \"help\" looks like it should have been doing nothing, and it's doing nothing on my end before my changes. That is the same DFHack installation you were using before, right? Is the issue still occurring?","files":null},{"type":3,"author":{"id":"537e51e6a7ef5475100b921bf361d99c28783de5"},"timestamp":1494789337,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMwMTMzMzQzMg==","github-url":"https://github.com/DFHack/dfhack/issues/1080#issuecomment-301333432"},"message":"Bizarrely, I can't seem to reproduce it. I wish I'd kept a transcript of that session, because I distinctly remember staring at what I'd typed, staring at the output, and immediately coming here to report it.","files":null}]}