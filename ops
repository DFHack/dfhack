{"version":1,"ops":[{"type":6,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1563192810,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0OTM1MjQzOA=="},"target":"cdb1e7125e24353b79c237abd1bc8538b44193dbcd4a0e599ff31d9e13af8f12","message":"I tried to add a comment to a compound definition (df.world-data.xml:world_region_details.edges):\n'''\n        \u003cstatic-array count='16' name='seed' comment='looks random'\u003e\n            \u003cstatic-array type-name='uint32_t' count='16'/\u003e\n        \u003c/static-array\u003e\n\n        \u003ccompound name='edges'\n            comment='random comment'\u003e\n'''\nbut when generated the world_region_details.h contents becomes:\n'''\n    uint32_t seed[16][16]; /*!\u003c looks random */\n    /**\u003c-----------------\n     * random comment \n     */\n    struct DFHACK_EXPORT T_edges {\n          ***  The fields in the compound go here. Cut away for brevity.\n      static struct_identity _identity;\n    public:\n      T_edges();\n    };\n    T_edges edges; /*!\u003c random comment */\u003c-----------------\n'''\nThe formatting also differs between the two instances if \u0026amp#10; is used to create split line comments.","files":null},{"type":6,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1563192829,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0OTM1MjU2Ng=="},"target":"cdb1e7125e24353b79c237abd1bc8538b44193dbcd4a0e599ff31d9e13af8f12","message":"I tried to add a comment to a compound definition (df.world-data.xml:world_region_details.edges):\n'''\n        \u003cstatic-array count='16' name='seed' comment='looks random'\u003e\n            \u003cstatic-array type-name='uint32_t' count='16'/\u003e\n        \u003c/static-array\u003e\n\n        \u003ccompound name='edges'\n            comment='random comment'\u003e\n'''\nbut when generated the world_region_details.h contents becomes:\n'''\n    uint32_t seed[16][16]; /*!\u003c looks random */\n    /**\u003c-----------------\n     * random comment \n     */\n    struct DFHACK_EXPORT T_edges {\n          ***  The fields in the compound go here. Cut away for brevity.\n      static struct_identity _identity;\n    public:\n      T_edges();\n    };\n    T_edges edges; /*!\u003c random comment */\u003c-----------------\n'''\nThe formatting also differs between the two instances if \u0026#10; is used to create split line comments.","files":null},{"type":6,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1563192846,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0OTM1MjY1MA=="},"target":"cdb1e7125e24353b79c237abd1bc8538b44193dbcd4a0e599ff31d9e13af8f12","message":"I tried to add a comment to a compound definition (df.world-data.xml:world_region_details.edges):\n'''\n        \u003cstatic-array count='16' name='seed' comment='looks random'\u003e\n            \u003cstatic-array type-name='uint32_t' count='16'/\u003e\n        \u003c/static-array\u003e\n\n        \u003ccompound name='edges'\n            comment='random comment'\u003e\n'''\nbut when generated the world_region_details.h contents becomes:\n'''\n    uint32_t seed[16][16]; /*!\u003c looks random */\n    /**\u003c-----------------\n     * random comment \n     */\n    struct DFHACK_EXPORT T_edges {\n          ***  The fields in the compound go here. Cut away for brevity.\n      static struct_identity _identity;\n    public:\n      T_edges();\n    };\n    T_edges edges; /*!\u003c random comment */\u003c-----------------\n'''\nThe formatting also differs between the two instances if '\u0026'#10; is used to create split line comments.","files":null},{"type":6,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1563192883,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0OTM1Mjg3Nw=="},"target":"cdb1e7125e24353b79c237abd1bc8538b44193dbcd4a0e599ff31d9e13af8f12","message":"I tried to add a comment to a compound definition (df.world-data.xml:world_region_details.edges):\n'''\n        \u003cstatic-array count='16' name='seed' comment='looks random'\u003e\n            \u003cstatic-array type-name='uint32_t' count='16'/\u003e\n        \u003c/static-array\u003e\n\n        \u003ccompound name='edges'\n            comment='random comment'\u003e\n'''\nbut when generated the world_region_details.h contents becomes:\n'''\n    uint32_t seed[16][16]; /*!\u003c looks random */\n    /**\u003c-----------------\n     * random comment \n     */\n    struct DFHACK_EXPORT T_edges {\n          ***  The fields in the compound go here. Cut away for brevity.\n      static struct_identity _identity;\n    public:\n      T_edges();\n    };\n    T_edges edges; /*!\u003c random comment */\u003c-----------------\n'''\nThe formatting also differs between the two instances if ''\u0026#10;'' is used to create split line comments.","files":null},{"type":6,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1563192897,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0OTM1Mjk2OA=="},"target":"cdb1e7125e24353b79c237abd1bc8538b44193dbcd4a0e599ff31d9e13af8f12","message":"I tried to add a comment to a compound definition (df.world-data.xml:world_region_details.edges):\n'''\n        \u003cstatic-array count='16' name='seed' comment='looks random'\u003e\n            \u003cstatic-array type-name='uint32_t' count='16'/\u003e\n        \u003c/static-array\u003e\n\n        \u003ccompound name='edges'\n            comment='random comment'\u003e\n'''\nbut when generated the world_region_details.h contents becomes:\n'''\n    uint32_t seed[16][16]; /*!\u003c looks random */\n    /**\u003c-----------------\n     * random comment \n     */\n    struct DFHACK_EXPORT T_edges {\n          ***  The fields in the compound go here. Cut away for brevity.\n      static struct_identity _identity;\n    public:\n      T_edges();\n    };\n    T_edges edges; /*!\u003c random comment */\u003c-----------------\n'''\nThe formatting also differs between the two instances if '''\u0026#10;''' is used to create split line comments.","files":null},{"type":6,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1563192912,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0OTM1MzA2Nw=="},"target":"cdb1e7125e24353b79c237abd1bc8538b44193dbcd4a0e599ff31d9e13af8f12","message":"I tried to add a comment to a compound definition (df.world-data.xml:world_region_details.edges):\n'''\n        \u003cstatic-array count='16' name='seed' comment='looks random'\u003e\n            \u003cstatic-array type-name='uint32_t' count='16'/\u003e\n        \u003c/static-array\u003e\n\n        \u003ccompound name='edges'\n            comment='random comment'\u003e\n'''\nbut when generated the world_region_details.h contents becomes:\n'''\n    uint32_t seed[16][16]; /*!\u003c looks random */\n    /**\u003c-----------------\n     * random comment \n     */\n    struct DFHACK_EXPORT T_edges {\n          ***  The fields in the compound go here. Cut away for brevity.\n      static struct_identity _identity;\n    public:\n      T_edges();\n    };\n    T_edges edges; /*!\u003c random comment */\u003c-----------------\n'''\nThe formatting also differs between the two instances if '''\n\u0026#10;\n''' is used to create split line comments.","files":null},{"type":6,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1563192977,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0OTM1MzQ0Mw=="},"target":"cdb1e7125e24353b79c237abd1bc8538b44193dbcd4a0e599ff31d9e13af8f12","message":"I tried to add a comment to a compound definition (df.world-data.xml:world_region_details.edges):\n'''\n        \u003cstatic-array count='16' name='seed' comment='looks random'\u003e\n            \u003cstatic-array type-name='uint32_t' count='16'/\u003e\n        \u003c/static-array\u003e\n\n        \u003ccompound name='edges'\n            comment='random comment'\u003e\n'''\nbut when generated the world_region_details.h contents becomes:\n'''\n    uint32_t seed[16][16]; /*!\u003c looks random */\n    /**\u003c-----------------\n     * random comment \n     */\n    struct DFHACK_EXPORT T_edges {\n          ***  The fields in the compound go here. Cut away for brevity.\n      static struct_identity _identity;\n    public:\n      T_edges();\n    };\n    T_edges edges; /*!\u003c random comment */\u003c-----------------\n'''\nThe formatting also differs between the two instances if '\u0026'#10; is used to create split line comments (Can't get the ampersand displayed correctly without the quotes).","files":null},{"type":6,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1563193057,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0OTM1NDA0NQ=="},"target":"cdb1e7125e24353b79c237abd1bc8538b44193dbcd4a0e599ff31d9e13af8f12","message":"I tried to add a comment to a compound definition (df.world-data.xml:world_region_details.edges):\n'''\n        \u003cstatic-array count='16' name='seed' comment='looks random'\u003e\n            \u003cstatic-array type-name='uint32_t' count='16'/\u003e\n        \u003c/static-array\u003e\n\n        \u003ccompound name='edges'\n            comment='random comment'\u003e\n'''\nbut when generated the world_region_details.h contents becomes:\n'''\n    uint32_t seed[16][16]; /*!\u003c looks random */\n    /**                                                       \u003c-----------------\n     * random comment \n     */\n    struct DFHACK_EXPORT T_edges {\n          ***  The fields in the compound go here. Cut away for brevity.\n      static struct_identity _identity;\n    public:\n      T_edges();\n    };\n    T_edges edges; /*!\u003c random comment */\u003c-----------------\n'''\nThe formatting also differs between the two instances if '\u0026'#10; is used to create split line comments (Can't get the ampersand displayed correctly without the quotes).","files":null},{"type":6,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1563193211,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0OTM1NDk4NQ=="},"target":"cdb1e7125e24353b79c237abd1bc8538b44193dbcd4a0e599ff31d9e13af8f12","message":"I tried to add a comment to a compound definition (df.world-data.xml:world_region_details.edges):\n'''\n        \u003cstatic-array count='16' name='seed' comment='looks random'\u003e\n            \u003cstatic-array type-name='uint32_t' count='16'/\u003e\n        \u003c/static-array\u003e\n\n        \u003ccompound name='edges'\n            comment='random comment'\u003e\n'''\nbut when generated the world_region_details.h contents becomes:\n'''\n    uint32_t seed[16][16]; /*!\u003c looks random */\n    /**                                                       \u003c-----------------\n     * random comment \n     */\n    struct DFHACK_EXPORT T_edges {\n          ***  The fields in the compound go here. Cut away for brevity.\n      static struct_identity _identity;\n    public:\n      T_edges();\n    };\n    T_edges edges; /*!\u003c random comment */\u003c-----------------\n'''\nThe formatting also differs between the two instances if '\u0026'#10; is used to create split line comments (Can't get the ampersand displayed correctly without the quotes). Also, the first definition (of 'seed') in the first quote isn't displayed, but just appears as blank lines, for some reason.","files":null},{"type":6,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1563242878,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0OTcxNDE3OQ=="},"target":"cdb1e7125e24353b79c237abd1bc8538b44193dbcd4a0e599ff31d9e13af8f12","message":"I tried to add a comment to a compound definition (df.world-data.xml:world_region_details.edges):\n```\n        \u003cstatic-array count='16' name='seed' comment='looks random'\u003e\n            \u003cstatic-array type-name='uint32_t' count='16'/\u003e\n        \u003c/static-array\u003e\n\n        \u003ccompound name='edges'\n            comment='random comment'\u003e\n```\nbut when generated the world_region_details.h contents becomes:\n```\n    uint32_t seed[16][16]; /*!\u003c looks random */\n    /**                                                       \u003c-----------------\n     * random comment \n     */\n    struct DFHACK_EXPORT T_edges {\n          ***  The fields in the compound go here. Cut away for brevity.\n      static struct_identity _identity;\n    public:\n      T_edges();\n    };\n    T_edges edges; /*!\u003c random comment */\u003c-----------------\n```\nThe formatting also differs between the two instances if '\u0026'#10; is used to create split line comments (Can't get the ampersand displayed correctly without the quotes). Also, the first definition (of 'seed') in the first quote isn't displayed, but just appears as blank lines, for some reason.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1563242975,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxMTYzNTQ2NQ==","github-url":"https://github.com/DFHack/dfhack/issues/1446#issuecomment-511635465"},"message":"Is `\u0026#10;` what you were trying to use? For multiline comments, using the `\u003ccomment\u003e` tag is probably cleaner than embedding newlines in a single-line attribute.\n\nAlso, backticks (```) are what you need for code blocks, not quotes (`'`). https://guides.github.com/features/mastering-markdown/ has more. I fixed the formatting above to stop the `*`s from producing italic text.","files":null},{"type":6,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1563242975,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0OTcxNDYzNA=="},"target":"1fb6ab180bd93e00a9acde0f48e55ac9844516621436d2446fe593e68b328674","message":"Is `\u0026#10;` what you were trying to use? For multiline comments, using the `\u003ccomment\u003e` tag is probably cleaner than embedding newlines in a single-line attribute.\n\nAlso, backticks (```) are what you need for code blocks, not quotes (`'`). https://guides.github.com/features/mastering-markdown/ has more. I fixed the formatting above to stop the `*`s from producing italic text.\n\nAlso, what's \"the first definition (of 'seed')\"? The definition you've pasted there should be all that's necessary. There's no \"struct DFHACK_EXPORT\" for it because it's a primitive type.","files":null},{"type":3,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1563272685,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDUxMTc0NjczNg==","github-url":"https://github.com/DFHack/dfhack/issues/1446#issuecomment-511746736"},"message":"What I meant was that the first definition was that of 'seed', and that it was the one that wasn't shown (because of my failure to realize the ticks should be the backwards ones), not for any technical reason regarding the XML itself.\n\nAnd yes, \u003ccomment\u003e seems to achieve at least half of what I want without the uglification induced by forcing newlines. The half that's achieved is to get the comment into the generated .h file. However, I still get the comment duplicated when placed inside the compound:\n```\n        \u003ccompound name='edges'\n            comment='In order to determine how biomes cross embark tile edges'\u003e\n            \u003ccomment\u003eTrying\n            a multiline\n            comment\u003c/comment\u003e\n            \u003cstatic-array count='16' name='split_x'\n                          comment='splits for horizontal edges, x=min y=max'\u003e\n                \u003cstatic-array type-name='coord2d' count='17'/\u003e\n            \u003c/static-array\u003e\n```\nresults in:\n```\n    /**\n     * In order to determine how biomes cross embark tile edges\n     * Trying\n     * a multiline\n     * comment\n     */\n    struct DFHACK_EXPORT T_edges {\n      df::coord2d split_x[16][17]; /*!\u003c splits for horizontal edges, x=min y=max */\n      df::coord2d split_y[17][16]; /*!\u003c splits for vertical edges, x=min y=max */\n      int8_t biome_corner[16][16]; /*!\u003c 0=Reference is NW, 1=Reference is N, 2=Reference is W, 3=Reference is current tile */\n      int8_t biome_x[16][16]; /*!\u003c 0=Reference is N, 1=Reference is current tile (adopted by S edge to the N) */\n      int8_t biome_y[16][16]; /*!\u003c 0=Reference is W, 1=Reference is current tile (Adopted by E edge to the W) */\n      static struct_identity _identity;\n    public:\n      T_edges();\n    };\n    /**\n     * Trying\n     * a multiline\n     * comment\n     */\n    T_edges edges; /*!\u003c In order to determine how biomes cross embark tile edges */\n```\n(Don't mind the actual text: it's currently mostly placeholders to experiment with the commenting functionality).\n\nThe other thing I was trying to achieve was to get the comment picked up by Ragundo's dwarfexplorer tool, but it doesn't pick up the \"comment\" attribute on the compound anyway...","files":null},{"type":6,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1563272685,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDI0OTkwMTUyNw=="},"target":"8a1268fb0d34ed1efeb1f9797551568fff4bb44d6932c0e53fc3387ea2c8e497","message":"What I meant was that the first definition was that of 'seed', and that it was the one that wasn't shown (because of my failure to realize the ticks should be the backwards ones), not for any technical reason regarding the XML itself.\n\nAnd yes, \u003ccomment\u003e seems to achieve at least half of what I want without the uglification induced by forcing newlines. The half that's achieved is to get the comment into the generated .h file. However, I still get the comment duplicated when placed inside the compound:\n```\n        \u003ccompound name='edges'\n            comment='In order to determine how biomes cross embark tile edges'\u003e\n            \u003ccomment\u003eTrying\n            a multiline\n            comment\u003c/comment\u003e\n            \u003cstatic-array count='16' name='split_x'\n                          comment='splits for horizontal edges, x=min y=max'\u003e\n                \u003cstatic-array type-name='coord2d' count='17'/\u003e\n            \u003c/static-array\u003e\n```\nresults in:\n```\n    /**\n     * In order to determine how biomes cross embark tile edges\n     * Trying\n     * a multiline\n     * comment\n     */\n    struct DFHACK_EXPORT T_edges {\n      df::coord2d split_x[16][17]; /*!\u003c splits for horizontal edges, x=min y=max */\n      df::coord2d split_y[17][16]; /*!\u003c splits for vertical edges, x=min y=max */\n      int8_t biome_corner[16][16]; /*!\u003c 0=Reference is NW, 1=Reference is N, 2=Reference is W, 3=Reference is current tile */\n      int8_t biome_x[16][16]; /*!\u003c 0=Reference is N, 1=Reference is current tile (adopted by S edge to the N) */\n      int8_t biome_y[16][16]; /*!\u003c 0=Reference is W, 1=Reference is current tile (Adopted by E edge to the W) */\n      static struct_identity _identity;\n    public:\n      T_edges();\n    };\n    /**\n     * Trying\n     * a multiline\n     * comment\n     */\n    T_edges edges; /*!\u003c In order to determine how biomes cross embark tile edges */\n```\n(Don't mind the actual text: it's currently mostly placeholders to experiment with the commenting functionality).\n\nThe other thing I was trying to achieve was to get the comment picked up by Ragundo's dwarfexplorer tool, but it doesn't pick up the \"comment\" attribute on the compound anyway...\n\nEdit: It seems the \u003ccomment\u003e tag causes its contents to be placed before the item inside of which it's placed in the XML file, resulting in an annoying difference between the placement in the two files:\n```\n            \u003cstatic-array count='16' name='split_x'\n                          comment='splits for horizontal edges, x=min y=max'\u003e\n                \u003cstatic-array type-name='coord2d' count='17'/\u003e\n            \u003c/static-array\u003e\n            \u003cstatic-array count='17' name='split_y'\n                          comment='splits for vertical edges, x=min y=max'\u003e\n                \u003cstatic-array type-name='coord2d' count='16'/\u003e\n                \u003ccomment\u003eanother\n                multi line\n                comment\u003c/comment\u003e\n            \u003c/static-array\u003e\n```\nresults in:\n```\n      df::coord2d split_x[16][17]; /*!\u003c splits for horizontal edges, x=min y=max */\n      /**\n       * another\n       * multi line\n       * comment\n       */\n      df::coord2d split_y[17][16]; /*!\u003c splits for vertical edges, x=min y=max */\n```\n(and if placed outside of the static-array but in between the first and second one, it still gets pushed outside of the compound the two are part of, with the associated duplication).","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1565474276,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDI1NDgzNjQxNzU="},"added":["structures"],"removed":[]}]}