{"version":1,"ops":[{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1473907625,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDc5MDEzMjIyMA=="},"added":["bug"],"removed":[]},{"type":3,"author":{"id":"f7b5a7930d0e1264ae1e4a774b03a7e78c2b7858"},"timestamp":1474173179,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0NzgyNDg2Nw==","github-url":"https://github.com/DFHack/dfhack/issues/995#issuecomment-247824867"},"message":"For cross-repo links, you can write `DFHack/scripts#6` - the identifying slug, then the pull or issue number.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1474173575,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0NzgyNTA3OA==","github-url":"https://github.com/DFHack/dfhack/issues/995#issuecomment-247825078"},"message":"References work with full links too, though, so they can be more convenient if you have the page open already.\n\nAnyway, just to clarify, which part was actually crashing? It looks like you made a lot of changes, but surely they're not all related to crash prevention.","files":null},{"type":3,"author":{"id":"40df2f3ed480522e40c8cce0fd2f22732492a72f"},"timestamp":1474176166,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI0NzgyNjQwNw==","github-url":"https://github.com/DFHack/dfhack/issues/995#issuecomment-247826407"},"message":"Correct, they're not all related to crashes.  Only items 1-3 and 7 in the pull request, and here in the report.  Items 4 and 6 felt like missing functionality, that seemed to be the spirit of the original script.  Item 5 was useful both for debugging, and being able to check which items were banned outside of flipping through the kitchen menu each time.  Item 8 is simply an addition to the script that isn't necessary, but may be something that a few people would like having.  Item number 10 was implemented wholly for debugging and visualization of the memory structure, without which I would not have been able to identify what the subtype flag was referencing.\n\nThe crash that lead to this, came about after running the original script and getting an error when it attempted to ban cooking on the potato plant.  During debugging I found that it had mistakenly added a cooking ban on a non-cookable item (one of either cave wheat, pig tail, ramie, or something else -- lost my notes on which came first).  Which prevented an addition to kitchen.exc_types.  This lead to the mismatch in the length of kitchen.exc_types, by leaving it shorter than the others.  And that was found after I discovered that index needed to be an array address, instead of the three zipped values.  \n\nUpon attempting execution, the script dumped a stack trace to the console, and then crashed when I resumed from a paused game state.  I'm not sure where to find out the smoking gun to say for sure that the mismatch in the array length of kitchen.exc_types or having a non cookable plant specifically caused the crash, but it was repeated thrice before I started digging into the script.  \n\nSo, in summation, the script failed  to completely execute a ban of \"seeds\" and \"brew\", by dumping a Ruby stack trace when it hit potato plants.  Then with an item banned incorrectly, and a mis-sized kitchen.exc_types array, the game crashed after resuming play.  (The crash may have come about due to my recurring brew job kicking off, or an immediate check of banned items.  I can't say for sure.)\n\nAnd then, while \"mill\" and \"thread\" appear to be useless right now, as there aren't any cookable mill/thread plants that I can see.  They both referenced a local variable that had not been initialized.\n\nI can run through it again with more debugging output on the original script late tomorrow morning if you are interested.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1475630185,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1MTU1ODEyNg==","github-url":"https://github.com/DFHack/dfhack/issues/995#issuecomment-251558126"},"message":"Merged.","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1475630185,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50ODEyNjM0MzEz"},"status":2},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1475631133,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI1MTU2MDE0MQ==","github-url":"https://github.com/DFHack/dfhack/issues/995#issuecomment-251560141"},"message":"Reopening per comment on https://github.com/DFHack/scripts/commit/7f53693ea79714d339f5d529b35273ed00f25c78","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1475631133,"metadata":{"github-id":"MDEzOlJlb3BlbmVkRXZlbnQ4MTI2NDM1MzY="},"status":1},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1586904606,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYxMzcxOTEwMQ==","github-url":"https://github.com/DFHack/dfhack/issues/995#issuecomment-613719101"},"message":"The original issue here seems to have been addressed.","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1586904606,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzIzMzE4MjE5NQ=="},"status":2}]}