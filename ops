{"version":1,"ops":[{"type":1,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1569061297,"metadata":{"github-id":"MDU6SXNzdWU0OTY2NDA1NTY=","github-url":"https://github.com/DFHack/dfhack/issues/1455","origin":"github"},"title":"New lua project depencency dfhack_llimits.h not found","message":"Downloaded DFHack from scratch according to instructions* after renaming my current installation (as it somehow contained older code than the one I've submitted and accepted, and it's easier to nuke and restart than trying to debug and correct, with nagging doubts of whether some errors were missed). After setting things up I tried to compile, and it failed with \"Cannot open source file: 'dfhack_llimits.h': No such file or directory\" for project \"lua\" and file \"D:\\dfhack\\build\\win64\\VC2015\\depends\\lua\\c1xx\", (and a lot of follow on errors when lua.lib and SDL.lib are missing).\n\nComparing the \u003cinstallation\u003e\\depends\\lua\\CMakeLists.txt files shows that the new installation has added a few lines:\n`\nif (MSVC)\n    target_compile_options(lua PRIVATE /FI dfhack_llimits.h)\nelse ()\n    target_compile_options(lua PRIVATE -include dfhack_llimits.h)\nendif ()\n`\n\nSearching, I found the file at \u003cinstallation\u003e\\depends\\lua\\include, but apparently it wasn't detected. Hacking CMakeLists.txt to change the MSVC line to:\n`\n    target_compile_options(lua PRIVATE /FI ./include/dfhack_llimits.h)\n`\nallowed compilation to find the file and things to proceed correctly.  Is this failure to find the file in a sub directory isolated to my installation or a more general issue?\n\n*Instructions:\n\"git clone --recursive https://github.com/DFHack/dfhack\ncd dfhack\n\nIf your version of Git does not support the --recursive flag, you will need to omit it and run git submodule update --init after entering the dfhack directory.\n\nTo get the latest development code (develop branch), clone as above and then:\n\ngit checkout develop\ngit submodule update\"","files":null}]}