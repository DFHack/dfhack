{"version":1,"ops":[{"type":1,"author":{"id":"2570a7d04abbf05328afa1eb2131c4fb16c50667"},"timestamp":1410445885,"metadata":{"github-id":"MDU6SXNzdWU0MjUzMDMxNw==","github-url":"https://github.com/DFHack/dfhack/issues/330","origin":"github"},"title":"workflow lua plugin : table index is nil","message":"using DF 0.40.10 (DF Phoebus with DFhack), the following tends to spam the dfhack console\n\nstack traceback:\n        ...rf fortress group\\DF_Phoebus_40_10v00\\hack\\lua\\utils.lua:309: in function 'parse_bitfield_int'\n        ... group\\DF_Phoebus_40_10v00\\hack\\lua\\plugins\\workflow.lua:116: in function 'guess_job_material'\n        ... group\\DF_Phoebus_40_10v00\\hack\\lua\\plugins\\workflow.lua:220: in function 'enum_job_outputs'\n        ... group\\DF_Phoebus_40_10v00\\hack\\lua\\plugins\\workflow.lua:233: in function \u003c... group\\DF_Phoebus_40_10v00\\hack\\lua\\plugins\\workflow.lua:224\u003e\n...rf fortress group\\DF_Phoebus_40_10v00\\hack\\lua\\utils.lua:309: table index is\nnil\n\nI found that replacing in worflow.lua, line  116\n        mat_mask = utils.parse_bitfield_int(mask_whole, df.job_material_category)\nwhith\n        mat_mask = utils.parse_bitfield_int(mask_whole, df.dfhack_material_category)\nremoves the error, (and probably allows workflow to handle more jobs)\n\nThis seem to be related to this commit : https://github.com/DFHack/df-structures/commit/9bbec980c28d296ce80813cb1bfc4dd31c19266d","files":null}]}