{"version":1,"ops":[{"type":1,"author":{"id":"bd8c10440c0a71a1d8096ede1925592c711af037"},"timestamp":1429942088,"metadata":{"github-id":"MDU6SXNzdWU3MDg2MDU0NQ==","github-url":"https://github.com/DFHack/dfhack/issues/607","origin":"github"},"title":"dfhack.units.computeMovementSpeed returns 0 or 10000 only(?).","message":"You can see it with my show-speeds.lua script (http://www.bay12forums.com/smf/index.php?topic=136748.0).  The screenshot there is from 0.34, and the first column is 100000/dfhack.units.computeMovementSpeed, giving a nominal 10 when the C++ function returns 10000, but getting an actual distribution of values in that screenshot (implying returned values between 0 and 10000).\n\nBut with dfhack-0.40.24-r2 and -r3 everyone I've seen so far gets  either 10 or `inf` in the script's output, depending whether the function returns 10000 or 0.\n\nNotice that the last line in the function in library/modules/Units.cpp is\n    `return std:min(10000, std:max(0, speed));`\nwhich explains where the 10000s and 0s are coming from.  Looks like the computation is coming up with speed \u003c 0 or speed \u003e 10000 (or garbage) to get the observed returned values.","files":null}]}