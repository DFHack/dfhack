{"version":1,"ops":[{"type":1,"author":{"id":"50f59a96b9b7e087929d72d59e95c4aa34b5cdc8"},"timestamp":1510513438,"metadata":{"github-id":"MDU6SXNzdWUyNzMyNTU3Mjg=","github-url":"https://github.com/DFHack/dfhack/issues/1186","origin":"github"},"title":"gui/teleport doesn't work if the sidebar is hidden","message":"DFHack's `teleport` is indispensable right now for working around [the tree bug](http://www.bay12games.com/dwarves/mantisbt/view.php?id=9252) that's infected DF for the last two years. While the `teleport` function works, the GUI is broken:\n\n```\n[DFHack]# gui/teleport\n./hack/lua/gui.lua:114: attempt to index a nil value (local 'rect')\nstack traceback:\n\t./hack/lua/gui.lua:114: in function 'gui.inset_frame'\n\t./hack/lua/gui/dwarfmode.lua:389: in method 'computeFrame'\n\t./hack/lua/gui.lua:439: in field 'updateLayout'\n\t./hack/lua/gui/dwarfmode.lua:275: in method 'updateLayout'\n\t./hack/lua/gui.lua:566: in method 'onResize'\n\t./hack/lua/gui.lua:504: in local 'fun'\n\t./hack/lua/class.lua:98: in upvalue 'invoke_after_rec'\n\t./hack/lua/class.lua:94: in upvalue 'invoke_after_rec'\n\t./hack/lua/class.lua:94: in upvalue 'invoke_after_rec'\n\t./hack/lua/class.lua:94: in upvalue 'invoke_after_rec'\n\t./hack/lua/class.lua:129: in global 'TeleportSidebar'\n\t...f-fortress/0.43.05/libexec/hack/scripts/gui/teleport.lua:133: in local 'script_code'\n\t./hack/lua/dfhack.lua:562: in function 'dfhack.run_script_with_env'\n\t(...tail calls...)\n```","files":null}]}