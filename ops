{"version":1,"ops":[{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1572291155,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU0NzEwOTk0Nw==","github-url":"https://github.com/DFHack/dfhack/issues/1465#issuecomment-547109947"},"message":"Does this prevent DFHack from starting? Or do you just have to dismiss a bunch of warnings?\nDoes the `xattr` command require any sort of authentication, or is it something that the `dfhack` launcher script would run?\n(I don't have Catalina to test on; I'd also be concerned about scanning through the entire DF folder on every launch, but maybe scanning `hack/plugins` and `hack/libs*` would be fast enough.)","files":null},{"type":3,"author":{"id":"3dea2675a2d028b3610607d8a0dd1b0290c516e0"},"timestamp":1572301598,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU0NzE3MjE2NA==","github-url":"https://github.com/DFHack/dfhack/issues/1465#issuecomment-547172164"},"message":"The existing behavior on Catalina does prevent DFHack from starting initially. Specifically it requires: moving back and forth between DF and the Apple security settings to \"Allow Anyway\" every dylib and framework file, of which there are over a hundred. Each library generates two alerts (before and after using \"Allow Anyway\"), and DFHack must be restarted about 5 times (I'm guessing this relates to batches of libraries that are loaded independently).\n\nThat's a good idea about removing the quarantine flags in the startup script. The xattr tool does not require special permissions. I tested the following addition to the `dfhack` shell script, and was able to run DFHack while only needing to go to the Apple security settings once (to run the `dfhack` script itself), which I believe is the current behavior under Mojave.\n\n```\nfind hack/lib* hack/plugins -print0 | xargs -0 xattr -d com.apple.quarantine\nfind libs -print0 | xargs -0 xattr -d com.apple.quarantine\nxattr -d com.apple.quarantine dwarfort.exe\n```\n\nOf course, the files referenced in lines 2 and 3 are shipped with DF itself, so there may eventually be an upstream fix for those that DFHack could rely on.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1572357983,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU0NzQzNjg1Nw==","github-url":"https://github.com/DFHack/dfhack/issues/1465#issuecomment-547436857"},"message":"Well, that's nice and secure! It does make our job easier, though. I'll test it out / see if it breaks pre-Catalina, and add it for the next release.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1572662942,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU0OTAwMzU1MA==","github-url":"https://github.com/DFHack/dfhack/issues/1465#issuecomment-549003550"},"message":"Hopefully f3d5a185ba7e1e857f24821d383278b1a5fc3ed7 does the trick; let me know if not.","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1572662942,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50Mjc2NDg5MzAyNA=="},"status":2},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1572663055,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDI3NjQ4OTQyODI="},"added":["launcher"],"removed":[]},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1572663055,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDI3NjQ4OTQyODQ="},"added":["os-specific"],"removed":[]}]}