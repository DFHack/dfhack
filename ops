{"version":1,"ops":[{"type":1,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1593726044,"metadata":{"github-id":"MDU6SXNzdWU2NTAyMTgxNjQ=","github-url":"https://github.com/DFHack/dfhack/issues/1602","origin":"github"},"title":"Trade screen searches don't restore item counts properly","message":"Reported by @FalcoGer on IRC\nThe issue is that the trade search classes (starting [here](https://github.com/DFHack/dfhack/blob/0.47.04-r1/plugins/search.cpp#L1217)) are only saving/restoring the [\"items\" and \"selected\" vectors](https://github.com/DFHack/df-structures/blob/0.47.04-r1/df.viewscreen.xml#L3149-L3154) - they need to handle the \"count\" vectors too. This will involve switching to search_multicolumn_modifiable, like the [kitchen search](https://github.com/DFHack/dfhack/blob/0.47.04-r1/plugins/search.cpp#L2126) or the [pets search](https://github.com/DFHack/dfhack/blob/0.47.04-r1/plugins/search.cpp#L770)","files":null}]}