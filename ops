{"version":1,"ops":[{"type":3,"author":{"id":"ddc94ad6549fc247cd4ecd33c9e4440c6032a3e9"},"timestamp":1273323087,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDIzMzM3NA==","github-url":"https://github.com/DFHack/dfhack/issues/5#issuecomment-233374"},"message":"Some notes on this, in case I am distracted by a bright shiny object.\n1. There is a basic \"tick\" in the system, one per 12 minutes in a 24 hour day (120 per day), counted from when the game started.  It is stored all over the place in dynamic memory, but the stable location for it appears to be 0x014701b8.  Note that this is \"subjective time\", and changing this value does not change the calendar.\n2. There is a stable location 0x00dccdcc, which contains a \"season counter\".  This ranges from 0-10,079.  Since there are 28 days in the dwarven month, there are 10,080 \"ticks\" in a season (120 x 28 x 3).\n3. When the season counter rolls over, the month and year increment appropriately. \n4. Changing the season counter between 0-10,079 is immediately reflected in the status page (if showing). Increasing the season counter beyond 10,079 produces a day, but no month, and does not increment the year.\n5. The file name for exported files appears to be the calendar year, plus the number of ticks in the calendar year  to the current date.\n\nNote that this is all from the memory editor -- plan is to continue to poke and then write some example code.","files":null},{"type":3,"author":{"id":"ddc94ad6549fc247cd4ecd33c9e4440c6032a3e9"},"timestamp":1273363386,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDIzMzgxMA==","github-url":"https://github.com/DFHack/dfhack/issues/5#issuecomment-233810"},"message":"I've got an example coded but not quite where I want it.  In the meantime:\n\nAdditional notes:\n1. There is a counter at 0x00dcceb6 which ranges from 0-3, and specifies the season.\n2. The year is at 0x00e79f00, staring me right in the face.  It helps when you can advance the other two counters to see the year roll over, of course....\n\nNote that this is DF 31.03 on Windows.\n\nTo further clarify the prior post -- advancing the \"calendar\" in no way seems to affect hunger, thirst, etc., which appear to be driven by the \"subjective\" heartbeat counter.  Calendar-driven events (caravans, migrants, etc. are triggered by advancing the calendar though).","files":null}]}