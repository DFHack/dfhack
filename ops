{"version":1,"ops":[{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1483547861,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDkxMTQzOTEzMQ=="},"added":["64-bit"],"removed":[]},{"type":3,"author":{"id":"8eec94822f0cd94318fe65f78e120bf220e9fbf8"},"timestamp":1483771379,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI3MTA2NzExNA==","github-url":"https://github.com/DFHack/dfhack/issues/1056#issuecomment-271067114"},"message":"I'm using 5.1.12 for the windows build already. As far as I'm aware, there shoudn't be any breaking changes in 5.2.2","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1489872760,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI4NzU3NjQxOA==","github-url":"https://github.com/DFHack/dfhack/issues/1056#issuecomment-287576418"},"message":"OS X is done as of dfhack/stonesense@1925760b2f611d246d1715a2e3cfb591a02ef00b","files":null},{"type":3,"author":{"id":"ae81ecb873fb0896840b36e2401490533571ae28"},"timestamp":1490155343,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI4ODI5MjUwMQ==","github-url":"https://github.com/DFHack/dfhack/issues/1056#issuecomment-288292501"},"message":"I'm not sure if it helps, but I was able to get stonesense to compile and run on Debian Linux (64-bit). I just did 3 things:\n- Switched stonesense plugin to ON in `plugins/CMakeLists.txt`\n- Copied system liballegro libs to `plugins/stonesense/allegro/lib/`\n- `Make` was stuck looking for `../plugins/stonesense/proto/../../proto/RemoteFortressReader.pb.cc`, but there is no \"proto\" dir in `plugins/stonesense/`. Creating an empty \"proto\" dir fixed it.\n\nThe liballegro that ships with Debian Jessie is version [5.0.10-3](https://packages.debian.org/jessie/liballegro5.0).\nI'll test it on other distros and report back.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1490155603,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI4ODI5MzAyNA==","github-url":"https://github.com/DFHack/dfhack/issues/1056#issuecomment-288293024"},"message":"\u003e Make was stuck looking for ../plugins/stonesense/proto/../../proto/RemoteFortressReader.pb.cc, but there is no \"proto\" dir in plugins/stonesense/. Creating an empty \"proto\" dir fixed it.\n\nInteresting. This hasn't ever happened for me, but looking at CMakeLists.txt and Plugins.cmake, it looks like it should be looking for `plugins/stonesense/proto/../../proto/RemoteFortressReader.proto`. What CMake version are you using?","files":null},{"type":3,"author":{"id":"ae81ecb873fb0896840b36e2401490533571ae28"},"timestamp":1490161952,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI4ODMwNTQxNA==","github-url":"https://github.com/DFHack/dfhack/issues/1056#issuecomment-288305414"},"message":"\u003e What CMake version are you using?\n\nv3.0.2","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1490162315,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDI4ODMwNjI0Mg==","github-url":"https://github.com/DFHack/dfhack/issues/1056#issuecomment-288306242"},"message":"Huh, so it's not an issue with 2.x. I guess we should add that folder, then.\n\nAlso, feel free to let me know if you have a working allegro build for Linux that we could use.","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1493953166,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDEwNjk5NjEzMjA="},"added":["crash/hang"],"removed":[]},{"type":3,"author":{"id":"aef37f9576bc240390e0946259cc2904b6987bb5"},"timestamp":1500492779,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxNjQ5Mjg1NQ==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-316492855"},"message":"I'm getting this problem now. DF crashes to desktop 6 out of 10 times when viewing a unit with \"v\". I tried the latest Masterwork DF (Modified Masterwork V1.29 (43.05)) and vanilla DF that comes in \"PeridexisErrant's Starter Pack 0.43.05-r07\". Crash happens on both versions so the only common thing is DFHack.\n\nLogs for Masterwork DF crash (Could not get it on vanilla):\nerrorlog.txt : https://pastebin.com/1GXBbWiM\ngamelog.txt : https://pastebin.com/WPZBYA5m\nstdout.log : EMPTY\nstdout.txt : https://pastebin.com/bicy4ibT\nstderr.log : FirstCall() - Initized HOOKS!\nstderr.txt :  https://pastebin.com/F6tV30QR","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1500492885,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxNjQ5MzI4MQ==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-316493281"},"message":"@Bassofia can you please test *without* DFHack, and with DFHack 0.43.05-r2, to help narrow it down?","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1500492957,"metadata":{"github-id":"MDEzOlJlb3BlbmVkRXZlbnQxMTcwODg4NTEw"},"status":1},{"type":3,"author":{"id":"aef37f9576bc240390e0946259cc2904b6987bb5"},"timestamp":1500493544,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxNjQ5NTg5MA==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-316495890"},"message":"I now know where I can post my findings regarding this bug so I will keep you updated when I can. I can't test Masterwork DF without DFHack because Masterwork needs it so I will try to find a direct path of reproduction on vanilla DF with DFHack. After that I will test without DFHack.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1500493621,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxNjQ5NjIxOQ==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-316496219"},"message":"Testing with PE's pack without DFHack could help too.","files":null},{"type":3,"author":{"id":"aef37f9576bc240390e0946259cc2904b6987bb5"},"timestamp":1500565520,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxNjc0NDg5Ng==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-316744896"},"message":"Tested new PeridexisErrant's Starter Pack 0.43.05-r08 (Now has latest DFHack version \"r2\") and managed to crash it. New logs, stderr seems a lot more messy than past logs.\n\nGamelog.txt : https://pastebin.com/TmGQZrvv\nstderr.log : https://pastebin.com/NHQ3s7GY\nstderr.txt : \"dfhack: redirecting stderr to stderr.log (again)\"\nstdout.log : \"Resetting textures\" (4 times)\nstdout.txt : \"Loading bindings from data/init/interface.txt\nResetting textures\ndfhack: redirecting stdout to stdout.log (again)\"","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1500565682,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxNjc0NTc0Mw==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-316745743"},"message":"That looks mostly irrelevant. However, there's a new Ruby issue in there due to your DF path containing an apostrophe. That's not related to the crash, though.\n\nCan you run install-info and post install-info.txt too?","files":null},{"type":3,"author":{"id":"aef37f9576bc240390e0946259cc2904b6987bb5"},"timestamp":1500566010,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxNjc0NzUwNg==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-316747506"},"message":"Install-info.txt  : https://pastebin.com/93dypaEJ","files":null},{"type":3,"author":{"id":"aef37f9576bc240390e0946259cc2904b6987bb5"},"timestamp":1500566129,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxNjc0ODEzMQ==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-316748131"},"message":"PeridexisErrant has another DFHack.init file with just one line, maybe I should disable multilevel? No idea how that can affect \"view unit\" tho. \ndfhack_PeridexisErrant.ini : \n##. Enhanced init things\n#. TwbT multilevel is a dfhack option in the launcher due to stability issues\nmultilevel 0","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1500568170,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxNjc1ODIyNw==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-316758227"},"message":"Can you run install-info with a save loaded? You might have some other things running that aren't listed there.","files":null},{"type":3,"author":{"id":"aef37f9576bc240390e0946259cc2904b6987bb5"},"timestamp":1500569908,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMxNjc2NjU4OQ==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-316766589"},"message":"install-log.txt with loaded save: https://pastebin.com/yGE1G6wG","files":null},{"type":2,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1501871901,"metadata":{"github-id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTE5MzYyMTYyNQ=="},"title":"Random crash when inspecting dwarves with the key v (0.43.05)","was":"Need 64-bit Allegro libraries for OS X/Linux"},{"type":3,"author":{"id":"74e8c5a6173b810f25eece40198bebcd72d9e780"},"timestamp":1507451474,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMzNDk5MTQ5Nw==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-334991497"},"message":"[install-info.txt](https://github.com/DFHack/dfhack/files/1366729/install-info.txt)\n\nI'm also affected by this bug. The initial poster described the problem: viewing a dwarf after having done a full save (and going back to the main menu) and select \"contine playing\".","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1507487717,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMzNTAyODI2MA==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-335028260"},"message":"Is it just happening with one save? What if you disable or upgrade TWBT? (TWBT isn't reporting its status there, so I'm assuming you're using an older version of it, but I'm not sure if you have it enabled or not.)\n\nI still haven't been able to reproduce this on my end, unfortunately.","files":null},{"type":3,"author":{"id":"74e8c5a6173b810f25eece40198bebcd72d9e780"},"timestamp":1507581395,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMzNTI3ODE1OQ==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-335278159"},"message":"No, it's not happening with one save. Three different saves are affected (all I did so far). Printmode is \"TWBT\".\nI dowloaded the \"PyNLP\" (PyLNP 0.12c - Lazy Newb Pack Python Edition) and only changed some options shown here: \"Phoebus Grafics\", \"No intro movies\", \"Windowed: 100x60\".\nMain reason were two or three issue, I had:\n- wanted to control growth (currently having a population limit of 30)\n- wanted better graphics\n- wanted better labor control (I'm also using Dwarf therapist from time to time)\n\nMaybe this issue is connected to PyNLP somehow?\n\nEdit: disable TWBT for last play session: problem is also there: saved game, continue, \"pressed u\" (dwarf list) - \"pressed z\" (zoom to dwarf) =\u003e crash","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1507598992,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMzNTMzMzE2OA==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-335333168"},"message":"Just to check, have you tried without DFHack at all?","files":null},{"type":3,"author":{"id":"74e8c5a6173b810f25eece40198bebcd72d9e780"},"timestamp":1507915776,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDMzNjUxNjkxMg==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-336516912"},"message":"I've tried to find a clue, how to reproduce the problem, but it's difficult. I've started a new game and saved every 5-10 minutes, but this way I could not reproduce the problem. But when I'm playing my regular game, I'm usually saving after 1-2h. In this case it happens with ~75% probability that the game crashes. So there must be a special action or a certain event that leads to the problem (which only happens if you are playing for a certain amount of time).\nI also tried without DFhack (but only for ~1 h and saving every 5-10 minutes). This never lead to any problems. But this does not prove anything, as similar actions with DFhack also worked without a crash.\n\nAlso tried to run with program with a debugger attached, but the memory heap functions seem to cause a major performance slowdown. NO_DEBUG_HEAP = 1 seems to help. Will try to get a stack trace, when this bug happens.","files":null},{"type":3,"author":{"id":"0c27d5e61b65e3d2e8ab63aa204af1694e5a1a6d"},"timestamp":1513316712,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MTkxOTMzNA==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-351919334"},"message":"I'm running DF 43.05 fortress mode and have had basically zero crashes until I started using DFhack (as packaged with PeridexisErrant's Starter Pack 0.43.05-r11\nI notice every time I start up DF the DFhack (43.05 r3) window says something about;\n\"TWBT: version 6.22\nTWBT: set PRINT_MODE to TWBT in data/init/init.txt to activate the plugin\nmultilevel is not a recognized command.\"\n\nMy crashes seem to happen shortly after loading a saved fort, and usually after I hit the key combinations of \"z\" + \"p\" while in the \"u\" screen looking at my dwarves and attempting to zoom and change labors on one. I have also had it crash upon using the \"v\" key.\n\nI have the starter pack DFHack option \"Other Automation plugins\" enabled, but nothing else.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1513459241,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1MjIxMjU3NA==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-352212574"},"message":"That output is not related to the crash - it means you have TWBT turned off, which also rules out TWBT as the cause of the crash, which helps some.\n\nDoes it crash *immediately* when you press those keys? Have you tried disabling all of the plugins you have selected? If that fixes the crash, what plugins exactly are you using (i.e. what does \"other automation plugins\" enable, exactly)? Also, can you reproduce the issue in 0.44.02? We don't really support 0.43.05 any more, and any fixes we make will not be backported to 0.43.05.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1514689180,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM1NDU4MjE3Ng==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-354582176"},"message":"@Alatun-Rom @Dracosophy @Bassofia @Mind78 (and anyone else with the issue):\n\nFirst, can you reproduce this in 0.44.03? If so, does the issue go away if you unload the search plugin (run `unload search`)? Adding this to the end dfhack.init and restarting DF would be a good idea to ensure that it takes effect every time. Make sure that `plug search` reports that the plugin is disabled. If that doesn't fix anything, then try `unload manipulator` and `unload sort`, ideally in that order. Those are the only three plugins (besides TWBT, which appears to not be the issue) that could possibly affect this screen.","files":null},{"type":3,"author":{"id":"d67716e2856567208232924548074dd2a2e39c0b"},"timestamp":1526010093,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM4ODI1MDg3Mg==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-388250872"},"message":"I have been encountering an equivalent issue over quite some time, on multiple PCs and in multiple versions of DF.  It only occurs when using PeridexisErrant starter pack, but it happens with multiple versions of that.\nAfter a save file has been loaded for some time, any inspection of dwarf to re-assign tasks (u, z, p, l) is likely to crash DF (instantly, no error displayed.)","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1526010232,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM4ODI1MTExMg==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-388251112"},"message":"\u003e It only occurs when using PeridexisErrant starter pack\n\nWhat else have you tested? Also, when exactly does it crash (you mentioned 4 different keys - which one(s) crash)? Did you try my advice in the comment above yours?","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1526044326,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM4ODM1OTI0Mg==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-388359242"},"message":"Okay, I think I've found a way to reproduce this. @Alatun-Rom @Dracosophy @Bassofia @Mind78 @Duggins does this match what you were seeing?\n\n* Select a dwarf with `v`\n* Press `p`-`l`\n* Press `esc`\n* Switch to a z-level with no units\n* Press `v` again\n\nIf that crashes, run `tweak block-labors disable` and try again.","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1526045360,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDE2MjE5NDE3MzA="},"added":["bug"],"removed":[]},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1526098352,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM4ODUyODQ0OQ==","github-url":"https://github.com/DFHack/dfhack/issues/1057#issuecomment-388528449"},"message":"I think this is resolved in DFHack 0.44.10-beta1. Please reopen/let us know if the problem persists in that version or newer.","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1526098352,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTYyMzA1MjMxNw=="},"status":2}]}