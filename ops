{"version":1,"ops":[{"type":1,"author":{"id":"678f4abbcdf8536bb17dd33ea11a056d23e6b550"},"timestamp":1583283569,"metadata":{"github-id":"MDU6SXNzdWU1NzUwNjM2OTY=","github-url":"https://github.com/DFHack/dfhack/issues/1512","origin":"github"},"title":"exportlegends produces invalid XML","message":"Like [I reported in the LegendsBrowser projet](https://github.com/robertjanetzko/LegendsBrowser/issues/53), I found an error while LegendsBrowser is parsing dfhack (latest master at commit 676e73d4770c129b4a78569f56fcf1b58f7e7389) `exportlegends all` XML data :\n\n```\n[Fatal Error] :878244:58: Element type \"history_event_body_abusedst.T_abuse_data:\" must be followed by either attribute specifications, \"\u003e\" or \"/\u003e\".\n[2020-03-03 19:52:57] SEVERE: error loading legends\norg.xml.sax.SAXParseException; lineNumber: 878244; columnNumber: 58; Element type \"history_event_body_abusedst.T_abuse_data:\" must be followed by either attribute specifications, \"\u003e\" or \"/\u003e\".\n\tat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1239)\n\tat legends.LegendsReader.read(LegendsReader.java:87)\n\tat legends.model.World$1.run(World.java:492)\n```\n\n`*-legends_plus.xml` near line 878244:\n\n```xml\n        \u003chistorical_event\u003e\n                \u003cid\u003e3738\u003c/id\u003e\n                \u003ctype\u003ebody_abused\u003c/type\u003e\n                \u003cbodies\u003e549\u003c/bodies\u003e\n                \u003cbodies\u003e558\u003c/bodies\u003e\n                \u003cbodies\u003e1467\u003c/bodies\u003e\n                \u003cbodies\u003e1497\u003c/bodies\u003e\n                \u003cciv\u003e248\u003c/civ\u003e\n                \u003chistfig\u003e-1\u003c/histfig\u003e\n                \u003csite\u003e94\u003c/site\u003e\n                \u003cabuse_type\u003e4\u003c/abuse_type\u003e\n                \u003cabuse_data\u003e\u003chistory_event_body_abusedst.T_abuse_data: 0x7fffb96fe400\u003e\u003c/abuse_data\u003e\n        \u003c/historical_event\u003e\n```","files":null}]}