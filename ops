{"version":1,"ops":[{"type":6,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1584218798,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlRWRpdDozNjAyNDkyNTg="},"target":"5f4a37878a23874e971453b1d559ce85e74f5f2a69fe4a2bc40f368e8146634a","message":"Reported on Reddit: https://www.reddit.com/r/dwarffortress/comments/fflu1q/biweekly_df_questions_thread/fkcbzcg/?context=3\n```\nCannot write field unit_action.T_data.job: not found.\nstack traceback:\n[C]: in ?\n[C]: in ?\n[C]: in ?\n[C]: in method 'assign'\nC:\\DwarfFortress\\df_47_04_win/hack/scripts/gui/advfort.lua:259: in global 'add_action'\nC:\\DwarfFortress\\df_47_04_win/hack/scripts/gui/advfort.lua:286: in global 'addJobAction'\nC:\\DwarfFortress\\df_47_04_win/hack/scripts/gui/advfort.lua:389: in function \u003cC:\\DwarfFortress\\df_47_04_win/hack/scripts/gui/advfort.lua:361\u003e\nCannot write field unit_action.T_data.job: not found.\nstack traceback:\n[C]: in ?\n[C]: in ?\n[C]: in ?\n[C]: in method 'assign'\nC:\\DwarfFortress\\df_47_04_win/hack/scripts/gui/advfort.lua:259: in global 'add_action'\nC:\\DwarfFortress\\df_47_04_win/hack/scripts/gui/advfort.lua:286: in global 'addJobAction'\nC:\\DwarfFortress\\df_47_04_win/hack/scripts/gui/advfort.lua:1035: in upvalue 'ContinueJob'\nC:\\DwarfFortress\\df_47_04_win/hack/scripts/gui/advfort.lua:1831: in function \u003cC:\\DwarfFortress\\df_47_04_win/hack/scripts/gui/advfort.lua:1797\u003e\n[C]: in ?\n\n```\n\nBuild: b9841110, 64-bit\n\n`job` was renamed to `Job`, breaking here: https://github.com/DFHack/scripts/blob/95a32a0f1709e17afd927f57675b81effbc42912/gui/advfort.lua#L283\n\nDiscussed on IRC - may be worth renaming these fields back to lowercase to minimize breakage in other scripts (and third-party tools)","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1584214343,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDMxMjk3MzA5MDg="},"added":["bug"],"removed":[]},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1584214343,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDMxMjk3MzA5MDk="},"added":["structures"],"removed":[]},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1584214343,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDMxMjk3MzA5MTA="},"added":["develop only"],"removed":[]},{"type":3,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1584442661,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwMDAwNzAyMg==","github-url":"https://github.com/DFHack/dfhack/issues/1520#issuecomment-600007022"},"message":"fix: https://github.com/DFHack/scripts/pull/130","files":null},{"type":3,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1584518972,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwMDQ3OTA3NQ==","github-url":"https://github.com/DFHack/dfhack/issues/1520#issuecomment-600479075"},"message":"Also there is issue with this commit: https://github.com/DFHack/scripts/commit/a1ae6a095b626c2667519176a28a40d5214e6fb9\n\nBecause of how local/vs global functions work in lua it broke bunch of stuff very subtly.","files":null},{"type":6,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1584518972,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6MzU4NzE2NDIz"},"target":"9ac37f8ed3355d0c9fe0d088ef1959f699f90901ae9ef746865040698c297568","message":"Also there is issue with this commit: https://github.com/DFHack/scripts/commit/a1ae6a095b626c2667519176a28a40d5214e6fb9\n\nBecause of how local/vs global functions work in lua it broke bunch of stuff very subtly. As far as i understand the all functions were made local this makes them defined in the line that they are implemented. While 'global' (in this case script-global) are can be used in a line before implementation. @BenLubar maybe you can chime in?\n\nEither way i'm hoping this global pandemic might give me time to  update/rewrite advfort maybe finally with companion support as they are more integral in the new DF version.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1585147238,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYwMzg3NzY5NA==","github-url":"https://github.com/DFHack/dfhack/issues/1520#issuecomment-603877694"},"message":"BenLubar added support for tagged unions using different names (i.e. capitalization in this case) for union items and the corresponding enum. I think that's probably the way to go to fix this (structures-side).","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1586836332,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDMyMjkzNjcxMjQ="},"added":["crash/hang"],"removed":[]},{"type":2,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1586836336,"metadata":{"github-id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MzIyOTM2NzIwMw=="},"title":"Segfault on 0.47.03-beta1","was":"gui/advfort breaking due to renamed unit_action fields"},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1586836338,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDMyMjkzNjcyNTY="},"added":["develop only"],"removed":[]},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1586836473,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYxMzIxMjA1MA==","github-url":"https://github.com/DFHack/dfhack/issues/1521#issuecomment-613212050"},"message":"@ror6ax we're going to need more details to address this - first off, does it occur in 0.47.04-beta1 or newer? If so, is it reproducible? Is it specific to any save (if so, uploading it would help)? What architecture (32-bit or 64-bit) are you using?","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1587795837,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYxOTMyOTQ3OQ==","github-url":"https://github.com/DFHack/dfhack/issues/1521#issuecomment-619329479"},"message":"We're going to need more information to be able to reproduce/fix this, unfortunately. Feel free to reopen this if it's reproducible in \u003e=0.47.04.","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1587795837,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzI3MTYzNDA1Nw=="},"status":2},{"type":3,"author":{"id":"ca02ad36b0f297cd754af4783192c3273439bb43"},"timestamp":1588131588,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYyMDk3MzA0NQ==","github-url":"https://github.com/DFHack/dfhack/issues/1521#issuecomment-620973045"},"message":"Just tested this on 0.47.04, same thing happens for me, stops at:\n\n`Loading stonesense/items/greiger items/Grei_items.xml`","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1588138885,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYyMTAwMTg4MQ==","github-url":"https://github.com/DFHack/dfhack/issues/1521#issuecomment-621001881"},"message":"Could you add details on the Stonesense crash to https://github.com/DFHack/stonesense/issues/68? The initial report here is likely unrelated.","files":null}]}