{"version":1,"ops":[{"type":1,"author":{"id":"be523fe0f95fc478bda36c722e6f106f8f7a41b5"},"timestamp":1421381627,"metadata":{"github-id":"MDU6SXNzdWU1NDUzODE3OQ==","github-url":"https://github.com/DFHack/dfhack/issues/492","origin":"github"},"title":"EventManager Enhancements","message":"This is a rough plan and a request for comments / ideas. I'm just going based on memory so the event names might be slightly off.\n\nRight now each event has independent polling. It would be better if related events could rely on the same polling function. ON_ATTACK is very similar to REPORT in how they are monitored so they ought to be able to do a lot of sharing, and they do but it's awkward and ad-hoc.\n\nIt would be nice if I had a good way of doing vmethod-triggered events or vmethod-based monitoring to avoid polling altogether. This would work well for an ITEM_CREATED event and make it slightly more powerful because it would make it possible to keep track of the items produced as output to a reaction and deal with them as a group instead of getting one event for each of them. This is sometimes useful but I forget specific examples.\n\nIt almost never matters but there are also a few minor issues with registering and unregistering for events. If you unregister for an event while that event is firing you might still get some callbacks, and if you register while an event is calling you won't. I may or may not fix this.","files":null}]}