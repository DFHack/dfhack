{"version":1,"ops":[{"type":1,"author":{"id":"f7b5a7930d0e1264ae1e4a774b03a7e78c2b7858"},"timestamp":1420543172,"metadata":{"github-id":"MDU6SXNzdWU1MzUwNTEzMg==","github-url":"https://github.com/DFHack/dfhack/issues/480","origin":"github"},"title":"Autolabor could be re-optimized following the labor changes","message":"Autolabor still works, but runs by a heuristic designed for the old labor system.  I'll let the documentation speak for itself:\n\n\u003e The idea behind this module is to constantly adjust labors so that the right dwarves\n\u003e are assigned to new tasks. The key is that, for almost all labors, once a dwarf begins\n\u003e a job it will finish that job even if the associated labor is removed. Thus the\n\u003e strategy is to frequently decide, for each labor, which dwarves should possibly take\n\u003e a new job for that labor if it comes in and which shouldn't, and then set the labors\n\u003e appropriately. The updating should happen as often as can be reasonably done without\n\u003e causing lag.\n\u003e \n\u003e The obvious thing to do is to just set each labor on a single idle dwarf who is best\n\u003e suited to doing new jobs of that labor. This works in a way, but it leads to a lot\n\u003e of idle dwarves since only one dwarf will be dispatched for each labor in an update\n\u003e cycle, and dwarves that finish tasks will wait for the next update before being\n\u003e dispatched. An improvement is to also set some labors on dwarves that are currently\n\u003e doing a job, so that they will immediately take a new job when they finish. The\n\u003e details of which dwarves should have labors set is mostly a heuristic.\n\u003e \n\u003e A complication to the above simple scheme is labors that have associated equipment.\n\u003e Enabling/disabling these labors causes dwarves to change equipment, and disabling\n\u003e them in the middle of a job may cause the job to be abandoned. Those labors\n\u003e (mining, hunting, and woodcutting) need to be handled carefully to minimize churn.\n\nThe recent changes to labors and job priorities suggest to me that the heuristic should be updated, since dwarves are much smarter about doing the right jobs when several labors are enabled.  I suspect that efficiency could be improved by having more dwarves with a given labor enabled, a less clear distinction between crafting and hauling dwarves, and keeping each dwarves higher-skill labors active (including maybe labors where a dwarf could acquire the skill).  Note however that the specifics are speculation and  should be backed up by some !!science!! before implementation.","files":null}]}