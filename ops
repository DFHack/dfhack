{"version":1,"ops":[{"type":1,"author":{"id":"6d838d1a75e8b20795a97dde9ab6c2604aa5bf2e"},"timestamp":1429661629,"metadata":{"github-id":"MDU6SXNzdWU2OTk4Mzg1Mw==","github-url":"https://github.com/DFHack/dfhack/issues/602","origin":"github"},"title":"Does not compile on Debian x86_64 - protobuf not linking to pthread","message":"Gives an error about threads when compiling protoc with gcc 4.9.2 on Debian amd64:\n\n$ LANG=C make install\n[ 10%] Built target lua\n[ 20%] Built target protobuf\n[ 24%] Built target protobuf-lite\n[ 30%] Built target protoc\nLinking CXX executable protoc\nlibprotoc.so: undefined reference to `pthread_once'\ncollect2: error: ld returned 1 exit status\nmake[2]: **\\* [depends/protobuf/protoc] Error 1\nmake[1]: **\\* [depends/protobuf/CMakeFiles/protoc-bin.dir/all] Error 2\nmake: **\\* [all] Error 2\n\n$ LANG=C gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.9/lto-wrapper\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --with-pkgversion='Debian 4.9.2-10' --with-bugurl=file:///usr/share/doc/gcc-4.9/README.Bugs --enable-languages=c,c++,java,go,d,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.9 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.9 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --disable-vtable-verify --enable-plugin --with-system-zlib --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-4.9-amd64/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-4.9-amd64 --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-4.9-amd64 --with-arch-directory=amd64 --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --enable-objc-gc --enable-multiarch --with-arch-32=i586 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\nThread model: posix\ngcc version 4.9.2 (Debian 4.9.2-10)","files":null}]}