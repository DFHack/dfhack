{"version":1,"ops":[{"type":1,"author":{"id":"1ef2bc8a1ad9208c89b88e223fa13be3d14e4673"},"timestamp":1331261569,"metadata":{"github-id":"MDU6SXNzdWUzNTc3MTA5","github-url":"https://github.com/DFHack/dfhack/issues/135","origin":"github"},"title":"Keybindings doesn't respect Input Language (alt. keyboard layouts) on Windows","message":"dfhack keybindings doesn't use the Input Language set in Windows when reading the keyboard, and just assumes QWERTY.\n\nThis means that alternate keyboard layouts (QWERTZ, AZERTY, Dvorak) don't bind keys correctly.\n\nTo repro (this was tested on a US-English install of Win7):\n1. Set an alternate Input Language:  Start \u003e intl.cpl \u003e keyboards and languages tab \u003e change keyboards \u003e add \u003e check English (United States)/Keyboard/United States-Dvorak. Change the \"Default Input Language\" to English (United States) - United States-Dvorak \u003e OK\n2. start dfhack/df.  Load a world in dfhack and navigate to a body of water/magma\n3. [DFHack]# keybinding add Ctrl-T \"twaterlvl\"\n4. Press Ctrl-T (note that Dvorak's T is where the K key is in QWERTY).  Nothing happens.\n5.  Press Ctrl-Y (note that Dvorak's Y is where the T key is in QWERTY).  Water is toggled to/from numbers.\n\nI also tested this in Ubuntu x64 11.10, and the problem didn't appear there, so it seems it's specific to handling keyboard events on Windows.","files":null}]}