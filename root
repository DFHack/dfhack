{"version":1,"ops":[{"type":1,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1471785181,"metadata":{"github-id":"MDU6SXNzdWUxNzIzMjA0NDY=","github-url":"https://github.com/DFHack/dfhack/issues/982","origin":"github"},"title":"zlib scan isn't re-run on Linux when build architecture changes","message":"This will result in trying (and failing) to link a 32-bit zlib to 64-bit DFHack:\n\n```\ncmake .. -DDFHACK_BUILD_ARCH=32\ncmake .. -DDFHACK_BUILD_ARCH=64\n```\n\nIt might be possible to use [get_property](https://cmake.org/cmake/help/v3.0/command/get_property.html) to detect changes to DFHACK_BUILD_ARCH, set ZLIB_LIBRARY to ZLIB_LIBRARY-NOTFOUND (or \"\", or maybe a different variable), which should re-trigger the scan.\n\n(This isn't an issue on Windows, because the 32-bit and 64-bit zlibs are copied into the build directory appropriately, or on OS X, where the system zlib is universal.)\n\nReported by mbrigdan on IRC.","files":null}]}