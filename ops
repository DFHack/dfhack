{"version":1,"ops":[{"type":1,"author":{"id":"c8bdff833a0d45e9a1c07751adfd0917db2f83d1"},"timestamp":1602520702,"metadata":{"github-id":"MDU6SXNzdWU3MTk1MTMyNTY=","github-url":"https://github.com/DFHack/dfhack/issues/1671","origin":"github"},"title":"Autogems UI save issue","message":"Hi.\nThanks for you work on DFHack, amazing tool.\nI still learning new plugins and today I tried to use autogems. So, I trying to define autogems rules in the UI: o -\u003e W -\u003e G\nI make some changes and use \"Esc\" to save.\nIn the moment the plugin seems to have a crash. Game works correctly, but I get following error in the DFHack console.\n```\n./hack/lua/json.lua:25: Could not write to /opt/dwarffortress/data/save/DeepDeep/autogems.json\nstack traceback:\n\t[C]: in function 'error'\n\t./hack/lua/json.lua:25: in function 'json.encode_file'\n\t/opt/dwarffortress/hack/scripts/gui/autogems.lua:105: in global 'save'\n\t/opt/dwarffortress/hack/scripts/gui/autogems.lua:237: in function \u003c/opt/dwarffortress/hack/scripts/gui/autogems.lua:236\u003e\n\t[C]: in ?\n\t[C]: in field 'dismiss'\n\t./hack/lua/gui.lua:556: in method 'dismiss'\n\t/opt/dwarffortress/hack/scripts/gui/autogems.lua:229: in function \u003c/opt/dwarffortress/hack/scripts/gui/autogems.lua:222\u003e\n\t[C]: in ?\n./hack/lua/json.lua:25: Could not write to /opt/dwarffortress/data/save/DeepDeep/autogems.json\nstack traceback:\n\t[C]: in function 'error'\n\t./hack/lua/json.lua:25: in function 'json.encode_file'\n\t/opt/dwarffortress/hack/scripts/gui/autogems.lua:105: in global 'save'\n\t/opt/dwarffortress/hack/scripts/gui/autogems.lua:237: in function \u003c/opt/dwarffortress/hack/scripts/gui/autogems.lua:236\u003e\n\t[C]: in ?\n\t[C]: in field 'dismiss'\n\t./hack/lua/gui.lua:556: in method 'dismiss'\n\t/opt/dwarffortress/hack/scripts/gui/autogems.lua:229: in function \u003c/opt/dwarffortress/hack/scripts/gui/autogems.lua:222\u003e\n\t[C]: in ?\n```\n\nThe changes in gems are not saved after all.\nI am playing on Linux. \nVersion: `DFHack version 0.47.04-r2 (release) on x86_64`","files":null}]}