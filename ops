{"version":1,"ops":[{"type":3,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1526810302,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5MDQ2OTkzMg==","github-url":"https://github.com/DFHack/dfhack/issues/1282#issuecomment-390469932"},"message":"More info: `qerror` hides the trace of error log. Replacing it with `error` should help.","files":null},{"type":3,"author":{"id":"e744ff0f5263d2419a6d0fe109790b5e0723c7a3"},"timestamp":1526811159,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5MDQ3MDY4OQ==","github-url":"https://github.com/DFHack/dfhack/issues/1282#issuecomment-390470689"},"message":"Stack traces are good for developers, not so good for ordinary users.","files":null},{"type":3,"author":{"id":"88b79c31fdfd52952dafcabb16168259734368cc"},"timestamp":1526811635,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5MDQ3MTA3NA==","github-url":"https://github.com/DFHack/dfhack/issues/1282#issuecomment-390471074"},"message":"True.\nHowever the `qerror` is intended for front-facing scripts and users should know e.g. that they called \"scipt_x\" and it reported the error. Thus it has 0 context. I.e. it's just a red colored message.\n\nSo either each `qerror` invocation needs to be looked over and some context added (e.g. this script-\u003e changed into the script name) or `qerror` changed somehow (e.g. add something before the message).\n\nIMHO both things need to be done. Change all calls with \"this script\" to \"$script\" and change `qerror` to replace \"$script\" to the script name itself. This would make it more resistant to copy-paste and file rename confusions.","files":null},{"type":3,"author":{"id":"e744ff0f5263d2419a6d0fe109790b5e0723c7a3"},"timestamp":1526812620,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5MDQ3MTg0Mg==","github-url":"https://github.com/DFHack/dfhack/issues/1282#issuecomment-390471842"},"message":"Ah, that's a good suggestion.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1526817493,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5MDQ3NTY0Mg==","github-url":"https://github.com/DFHack/dfhack/issues/1282#issuecomment-390475642"},"message":"We can probably prepend the current script name pretty easily (unix-style), but keep in mind that qerror doesn't necessarily have to be called from scripts.","files":null},{"type":3,"author":{"id":"e744ff0f5263d2419a6d0fe109790b5e0723c7a3"},"timestamp":1526831814,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5MDQ5MjE4NA==","github-url":"https://github.com/DFHack/dfhack/issues/1282#issuecomment-390492184"},"message":"Yes, but a user shouldn't have to care too much about the difference between a script and a plugin. The message source should be identifiable in either case.","files":null},{"type":3,"author":{"id":"e744ff0f5263d2419a6d0fe109790b5e0723c7a3"},"timestamp":1526833260,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5MDQ5MzY0Ng==","github-url":"https://github.com/DFHack/dfhack/issues/1282#issuecomment-390493646"},"message":"Testing this is hard, since I don't know how I was triggering it in the first place.","files":null},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1526937357,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5MDc4NTM0NQ==","github-url":"https://github.com/DFHack/dfhack/issues/1282#issuecomment-390785345"},"message":"You have a list of scripts that include that message, right? Search your init file(s) for keybinding commands bound to any of those scripts and try pressing those keys in-game where they're bound.\n\nMy point is that qerror could be called from a Lua file that isn't called from a script, so we wouldn't be able to determine the name to prepend. The only example of this that I found was plugins/lua/dwarfmonitor.lua, and it already prefixes its error messages.","files":null},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1527020610,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDE2NDAyODQ3OTA="},"added":["bug"],"removed":[]},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1527020610,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDE2NDAyODQ3OTI="},"added":["crash/hang"],"removed":[]},{"type":3,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1527020823,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM5MTEyOTIxNw==","github-url":"https://github.com/DFHack/dfhack/issues/1285#issuecomment-391129217"},"message":"Update: `unload confirm` does not fix it. `unload mousequery` does.","files":null},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1527021598,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTY0MDMxNzg3Nw=="},"status":2}]}