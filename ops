{"version":1,"ops":[{"type":3,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1524816729,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDM4NDg5ODcxMw==","github-url":"https://github.com/DFHack/dfhack/issues/1262#issuecomment-384898713"},"message":"As far as I understand, the \"stocks\" plugin uses the virtual function item-\u003egetItemDescription (via Items::getDescription) to find the name of items, so the root of the issue seems to be that the implementations of this function fail to emulate the native DF functionality to extract the title of (some) \"bookst\" and all written on quires and scrolls rather than the description of the item itself.\nI would expect the DFHack search enhancement of stocks to use the same function, although I haven't bothered to locate that code.\nAs an alternative, \"stocks\" and the search function could add code to check whether an item is written on (don't use the \"has_written_content\" flag: it's not reliable: see df_structures issue dfhack/df-structures#251) and add code to retrieve the title rather than use the physical description.","files":null},{"type":2,"author":{"id":"df7feee793b3a4f60453609739052ef8e882d092"},"timestamp":1524816818,"metadata":{"github-id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTU5ODIzNTY5Nw=="},"title":"The search enhancement of the stocks screen and the enhanced stock view fail on tool books and some \"books\"","was":"The search enhancement of the stocks screen and the enhanced stock view fail on tool books and some \"books\""},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1526137812,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDE2MjMyMjQ4OTg="},"added":["bug"],"removed":[]},{"type":5,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1526137838,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDE2MjMyMjUwNTg="},"added":["stocks"],"removed":[]},{"type":4,"author":{"id":"e77d0a5f059ed8eaaa1afef6624480d02a2f025a"},"timestamp":1587863932,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MzI3MjQzMTkwOQ=="},"status":2}]}