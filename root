{"version":1,"ops":[{"type":1,"author":{"id":"4707820a4bc067c3463daf4d8a4f6d1e34c3c882"},"timestamp":1465300554,"metadata":{"github-id":"MDU6SXNzdWUxNTg5MDQ2NDk=","github-url":"https://github.com/DFHack/dfhack/issues/939","origin":"github"},"title":"Compile error: Experimental push on scalar is now forbidden","message":"Hi, I'm getting this error while trying to compile develop branch on my \nGentoo linux (master branch compiles fine):\n\n```\n[ 26%] Generating /home/majiin/tools/dfhack/library/include/df/codegen.out.xml\ncd /home/majiin/tools/dfhack/library \u0026\u0026 perl xml/codegen.pl xml include/df\nExperimental push on scalar is now forbidden at xml/StructType.pm line 224, near \"$method;\"\nType of arg 1 to StructFields::with_struct_block must be block or sub {} (not reference constructor) at xml/StructType.pm line 242, near \"1;\"\nCompilation failed in require at xml/codegen.pl line 22.\nBEGIN failed--compilation aborted at xml/codegen.pl line 22.\nmake[2]: *** [library/CMakeFiles/generate_headers.dir/build.make:124: /home/majiin/tools/dfhack/library/include/df/codegen.out.xml] Error 255\nmake[2]: Leaving directory '/home/majiin/tools/dfhack_build'\nmake[1]: *** [CMakeFiles/Makefile2:772: library/CMakeFiles/generate_headers.dir/all] Error 2\nmake[1]: Leaving directory '/home/majiin/tools/dfhack_build'\nmake: *** [Makefile:153: all] Error 2\n```\n\nI believe this error is caused by the autoderef feature removal in perl 2.24.\nJust in case here is `emerge --info` snippet:\n\n```\nPortage 2.3.0_rc1 (python 3.5.1-final-0, hardened/linux/amd64, gcc-5.3.0, glibc-2.23-r2, 4.6.1-gentoo-majiin x86_64)\nSystem uname: Linux-4.6.1-gentoo-majiin-x86_64-AMD_A8-4500M_APU_with_Radeon-tm-_HD_Graphics-with-gentoo-2.2\nKiB Mem:     5564552 total,   1764572 free\nKiB Swap:   12287996 total,  11926612 free\nTimestamp of repository gentoo: Tue, 07 Jun 2016 07:30:01 +0000\nsh bash 4.3_p42-r2\nld GNU ld (Gentoo 2.25.1 p1.1) 2.25.1\nccache version 3.2.5 [enabled]\napp-shells/bash:          4.3_p42-r2::gentoo\ndev-lang/perl:            5.24.0-r1::gentoo\ndev-lang/python:          2.7.11-r2::gentoo, 3.4.3-r7::gentoo, 3.5.1-r3::gentoo\ndev-util/ccache:          3.2.5::gentoo\ndev-util/cmake:           3.5.2-r1::gentoo\ndev-util/pkgconfig:       0.29.1::gentoo\nsys-apps/baselayout:      2.2::gentoo\nsys-apps/openrc:          0.21::gentoo\nsys-apps/sandbox:         2.10-r2::gentoo\nsys-devel/autoconf:       2.13::gentoo, 2.69-r2::gentoo\nsys-devel/automake:       1.11.6-r2::gentoo, 1.12.6-r1::gentoo, 1.13.4-r1::gentoo, 1.14.1-r1::gentoo, 1.15-r2::gentoo\nsys-devel/binutils:       2.25.1-r1::gentoo\nsys-devel/gcc:            5.3.0::gentoo\nsys-devel/gcc-config:     1.8-r1::gentoo\nsys-devel/libtool:        2.4.6-r2::gentoo\nsys-devel/make:           4.2-r2::gentoo\nsys-kernel/linux-headers: 4.6::gentoo (virtual/os-headers)\nsys-libs/glibc:           2.23-r2::gentoo\n```","files":null}]}